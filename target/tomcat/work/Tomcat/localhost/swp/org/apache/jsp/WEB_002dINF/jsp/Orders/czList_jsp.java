/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.47
 * Generated at: 2018-08-29 02:18:41 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.WEB_002dINF.jsp.Orders;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class czList_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			"", true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write('\r');
      out.write('\n');

    String appPath = request.getContextPath();
    String ticketId = (String) request.getAttribute("ticketId");

      out.write('\r');
      out.write('\n');
      out.write('\r');
      out.write('\n');
      org.apache.jasper.runtime.JspRuntimeLibrary.include(request, response, "/common/webCommon/user_top.jsp" + "?" + org.apache.jasper.runtime.JspRuntimeLibrary.URLEncode("title", request.getCharacterEncoding())+ "=" + org.apache.jasper.runtime.JspRuntimeLibrary.URLEncode("我的订单", request.getCharacterEncoding()), out, true);
      out.write('\r');
      out.write('\n');
      org.apache.jasper.runtime.JspRuntimeLibrary.include(request, response, "/common/webCommon/wasteCircleMenu.jsp" + "?" + org.apache.jasper.runtime.JspRuntimeLibrary.URLEncode("menuId", request.getCharacterEncoding())+ "=" + org.apache.jasper.runtime.JspRuntimeLibrary.URLEncode("#myOrders", request.getCharacterEncoding()), out, true);
      out.write("\r\n");
      out.write("<link rel=\"stylesheet\" href=\"");
      out.print(appPath);
      out.write("/main/common/elementui/index.css\">\r\n");
      out.write("<link rel=\"stylesheet\" href=\"");
      out.print(appPath);
      out.write("/css/myBusiness/business.css\">\r\n");
      out.write("<link rel=\"stylesheet\" href=\"");
      out.print(appPath);
      out.write("/css/myBusiness/sign.css\">\r\n");
      out.write("<section>\r\n");
      out.write("    <div class=\"el-breadcrumb\">\r\n");
      out.write("        <span class=\"el-breadcrumb__item\">\r\n");
      out.write("            <span class=\"el-breadcrumb__item__inner\">我的易废圈</span>\r\n");
      out.write("            <span class=\"el-breadcrumb__separator\">/</span>\r\n");
      out.write("        </span>\r\n");
      out.write("        <span class=\"el-breadcrumb__item\">\r\n");
      out.write("            <span class=\"el-breadcrumb__item__inner\">我的订单</span>\r\n");
      out.write("            <span class=\"el-breadcrumb__separator\">/</span>\r\n");
      out.write("        </span>\r\n");
      out.write("    </div>\r\n");
      out.write("    <div class=\"\">\r\n");
      out.write("        <div id=\"app\">\r\n");
      out.write("            <template>\r\n");
      out.write("                <el-row :gutter=\"10\" class=\"searchDiv\">\r\n");
      out.write("                    <el-col :xs=\"8\" :sm=\"8\" :md=\"8\" :lg=\"8\" align=\"left\">\r\n");
      out.write("                        <b>订单状态：</b>\r\n");
      out.write("                        <el-button type=\"text\" :class=\"{'select':orderStatus==''}\" @click=\"queryStatus('')\">全部</el-button>\r\n");
      out.write("                        <el-button type=\"text\" :class=\"{'select':orderStatus=='DONE'}\" @click=\"queryStatus('DONE')\">已完成</el-button>\r\n");
      out.write("                        <el-button type=\"text\" :class=\"{'select':orderStatus=='ONGOING'}\" @click=\"queryStatus('ONGOING')\">进行中</el-button>\r\n");
      out.write("                    </el-col>\r\n");
      out.write("                    <el-col :xs=\"16\" :sm=\"16\" :md=\"16\" :lg=\"16\" align=\"right\">\r\n");
      out.write("                        <b>订单时间：</b>\r\n");
      out.write("                        <el-button type=\"text\" :class=\"{'select':dateType=='TODAY'}\" @click=\"queryDateType('TODAY')\">今天</el-button>\r\n");
      out.write("                        <el-button type=\"text\" :class=\"{'select':dateType=='WEEK'}\" @click=\"queryDateType('WEEK')\">本周</el-button>\r\n");
      out.write("                        <el-button type=\"text\" :class=\"{'select':dateType=='MONTH'}\" @click=\"queryDateType('MONTH')\">本月</el-button>\r\n");
      out.write("                        <div style=\"float: right;margin-top: 3px;margin-left: 10px;\">\r\n");
      out.write("                            <el-date-picker\r\n");
      out.write("                                    v-model=\"startDateTime\"\r\n");
      out.write("                                    type=\"date\"\r\n");
      out.write("                                    @change=\"changeDate\"\r\n");
      out.write("                                    format=\"yyyy-MM-dd\"\r\n");
      out.write("                                    placeholder=\"选择开始日期\">\r\n");
      out.write("                            </el-date-picker>\r\n");
      out.write("                            <el-date-picker\r\n");
      out.write("                                    v-model=\"endDateTime\"\r\n");
      out.write("                                    type=\"date\"\r\n");
      out.write("                                    @change=\"changeDate\"\r\n");
      out.write("                                    format=\"yyyy-MM-dd\"\r\n");
      out.write("                                    placeholder=\"选择结束日期\">\r\n");
      out.write("                            </el-date-picker>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </el-col>\r\n");
      out.write("                </el-row>\r\n");
      out.write("                <el-row :gutter=\"10\" class=\"searchDiv\">\r\n");
      out.write("                    <el-col :xs=\"14\" :sm=\"14\" :md=\"14\" :lg=\"14\" align=\"left\">\r\n");
      out.write("                        <b>负 &nbsp;责 人：</b>\r\n");
      out.write("                        <el-button type=\"text\" :class=\"{'select':managerType==''&&manager==''}\" @click=\"queryManagerType('')\">全部</el-button>\r\n");
      out.write("                        <el-button type=\"text\" :class=\"{'select':managerType=='my'}\" @click=\"queryManagerType('my')\">我的</el-button>\r\n");
      out.write("                        <el-select v-model=\"manager\" placeholder=\"选择其他负责人\" style=\"margin-left: 12px\" @change=\"managerChange()\">\r\n");
      out.write("                            <el-option v-for=\"item in managerList\" :key=\"item.userId\" :label=\"item.chineseName\" :value=\"item.userId\">\r\n");
      out.write("                            </el-option>\r\n");
      out.write("                        </el-select>\r\n");
      out.write("                    </el-col>\r\n");
      out.write("                    <el-col :xs=\"10\" :sm=\"10\" :md=\"10\" :lg=\"10\" align=\"right\">\r\n");
      out.write("                        <b>企  &nbsp;业：</b>\r\n");
      out.write("                        <el-select v-model=\"entId\" placeholder=\"选择企业名称\" @change=\"entChange()\">\r\n");
      out.write("                            <el-option v-for=\"item in entList\" :key=\"item.entId\" :label=\"item.entName\" :value=\"item.entId\">\r\n");
      out.write("                            </el-option>\r\n");
      out.write("                        </el-select>\r\n");
      out.write("                    </el-col>\r\n");
      out.write("                </el-row>\r\n");
      out.write("                <el-row :gutter=\"10\" class=\"searchDiv\">\r\n");
      out.write("                    <el-col :xs=\"14\" :sm=\"14\" :md=\"14\" :lg=\"14\" align=\"left\">\r\n");
      out.write("                        <b>来&nbsp;&nbsp;源：</b>\r\n");
      out.write("                        <el-select v-model=\"activityId\" placeholder=\"选择活动名称\" style=\"margin-left: 12px\" @change=\"activityNameChange()\">\r\n");
      out.write("                            <el-option v-for=\"item in activityList\" :key=\"item.activityId\" :label=\"item.activityName\" :value=\"item.activityId\">\r\n");
      out.write("                            </el-option>\r\n");
      out.write("                        </el-select>\r\n");
      out.write("                    </el-col>\r\n");
      out.write("                </el-row>\r\n");
      out.write("                <div id=\"selected\" class=\"bar\" v-if=\"orderTotal\">\r\n");
      out.write("                    <div class=\"barct\">\r\n");
      out.write("                        <span class=\"condition\">筛选结果：</span>\r\n");
      out.write("                        <em>共{{orderTotal.queryCount}}笔订单符合筛选条件</em>\r\n");
      out.write("                        <span class=\"par\">\r\n");
      out.write("\t\t\t\t\t\t\t<b>总数：</b>\r\n");
      out.write("                            <em>{{orderTotal.totalAmount||0}}</em>\r\n");
      out.write("\t\t\t\t\t\t</span>\r\n");
      out.write("                        <span class=\"par money\">\r\n");
      out.write("\t\t\t\t\t\t\t<b>金额：</b>\r\n");
      out.write("                            <em>￥{{fmoney(orderTotal.totalPrice,2)}}</em>\r\n");
      out.write("\t\t\t\t\t\t</span>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("                <div v-for=\"(item,index) in list\">\r\n");
      out.write("                    <div class=\"buy_item panel panel-body\">\r\n");
      out.write("                        <el-row :gutter=\"10\" style=\"margin-bottom:10px\">\r\n");
      out.write("                            <el-col :xs=\"20\" :sm=\"20\" :md=\"20\" :lg=\"20\">\r\n");
      out.write("                                <span class=\"status\" :class=\"statusClass[item.busiStatus]\">{{item.busiStatus}}</span><b style=\"margin-left: 14px\">单位：</b><a href=\"javascript:;\" title=\"查看企业详情\" @click=\"entDetail(item.releaseEntId,item.facilitatorEntId)\"><em style=\"margin-right: 4px\">{{item.releaseEntName}}</em></a>\r\n");
      out.write("                                <a class=\"qipao_logo\" href=\"javascript:;\" @click=\"contact(item.facilitatorEntId||item.releaseEntId,item.releaseEntName)\" title=\"联系TA\" style=\"margin-right: 14px;\">\r\n");
      out.write("                                    <img src=\"../main/pc/img/qipao.jpg\"></a>\r\n");
      out.write("                                <b>负责人：</b><em>{{item.inquiryPersonName}}</em>\r\n");
      out.write("                                <b>来源：</b><em><b style=\"color: #1171d1\">\r\n");
      out.write("                                <a href=\"javascript:;\" style=\"color: #1171d1\" v-if=\"item.activityName\" @click=\"viewActivityDetail(item.activityId)\">{{item.activityName}}</a>\r\n");
      out.write("                                <font v-else>资源池</font>\r\n");
      out.write("                                </b></em>\r\n");
      out.write("                                <template v-if=\"item.disEntName\"   >\r\n");
      out.write("                                    <b> 处置企业：</b>\r\n");
      out.write("                                    <em>\r\n");
      out.write("                                        <b style=\"color: #1171d1\">\r\n");
      out.write("                                            {{item.disEntName}}\r\n");
      out.write("                                        </b>\r\n");
      out.write("                                    </em>\r\n");
      out.write("                                </template>\r\n");
      out.write("                            </el-col>\r\n");
      out.write("                            <el-col :xs=\"4\" :sm=\"4\" :md=\"4\" :lg=\"4\" align=\"right\" style=\"font-size:12px;color: #6a7580;\">\r\n");
      out.write("                                    {{item.orderDate}}\r\n");
      out.write("                            </el-col>\r\n");
      out.write("                        </el-row>\r\n");
      out.write("                        <el-row :gutter=\"10\" style=\"margin-bottom:10px\">\r\n");
      out.write("                            <el-col :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"24\">\r\n");
      out.write("                                <b>报价方式：</b><em>{{item.quotedType==0?'打包报价':'单独报价'}}</em><b>金额：</b><em><b style=\"color: #ff474c;font-weight:bold\">￥{{item.totalPrice}}</b></em>\r\n");
      out.write("                                <b>总数：</b><em><b style=\"color: #1171d1\">{{item.totalAmount}}</b></em>\r\n");
      out.write("                            </el-col>\r\n");
      out.write("                        </el-row>\r\n");
      out.write("                        <el-table :data=\"item.orderDetail\" border\r\n");
      out.write("                                  style=\"width:100%\">\r\n");
      out.write("                            <el-table-column\r\n");
      out.write("                                    prop=\"wasteName\"\r\n");
      out.write("                                    label=\"危废名称\">\r\n");
      out.write("                            </el-table-column>\r\n");
      out.write("                            <el-table-column\r\n");
      out.write("                                    prop=\"wasteCode\"\r\n");
      out.write("                                    label=\"危废代码\">\r\n");
      out.write("                            </el-table-column>\r\n");
      out.write("                            <el-table-column\r\n");
      out.write("                                    prop=\"amount\"\r\n");
      out.write("                                    align=\"right\"\r\n");
      out.write("                                    label=\"数量\">\r\n");
      out.write("                            </el-table-column>\r\n");
      out.write("                            <el-table-column\r\n");
      out.write("                                    prop=\"unitValue\"\r\n");
      out.write("                                    label=\"单位\">\r\n");
      out.write("                            </el-table-column>\r\n");
      out.write("                            <el-table-column\r\n");
      out.write("                                    align=\"right\"\r\n");
      out.write("                                    v-if=\"item.quotedType!=0\"\r\n");
      out.write("                                    label=\"单价\" >\r\n");
      out.write("                                <template scope=\"scope\">\r\n");
      out.write("                                    <span v-if=\"scope.row.price == 0\" >-</span>\r\n");
      out.write("                                    <span v-if=\"scope.row.price!=0\" >￥{{scope.row.priceStr}}</span>\r\n");
      out.write("                                </template>\r\n");
      out.write("                            </el-table-column>\r\n");
      out.write("                            <el-table-column\r\n");
      out.write("                                    align=\"right\"\r\n");
      out.write("                                    v-if=\"item.quotedType!=0\"\r\n");
      out.write("                                    label=\"单项总价\" >\r\n");
      out.write("                                <template scope=\"scope\">\r\n");
      out.write("                                    <span v-if=\"scope.row.wasteTotalPrice == 0\" >-</span>\r\n");
      out.write("                                    <span style=\"color: #ff474c;\" class='wasteTotalPrice' v-if=\"scope.row.wasteTotalPrice!=0\">￥{{scope.row.wasteTotalPriceStr}}</span>\r\n");
      out.write("                                </template>\r\n");
      out.write("                            </el-table-column>\r\n");
      out.write("                        </el-table>\r\n");
      out.write("                        <el-row :gutter=\"10\" style=\"margin-top:10px\" >\r\n");
      out.write("                            <el-col :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"24\"><b>备注：</b><em>{{item.inquiryRemark||'--'}}</em></el-col>\r\n");
      out.write("                        </el-row>\r\n");
      out.write("                        <div style=\"margin-top: 9px;text-align: right\" v-show=\"item.busiStatus=='进行中'\">\r\n");
      out.write("                            <el-button type=\"text\" class=\"signBtn\" icon=\"el-icon-upload\" style=\"margin-right: 18px\" @click=\"showUploadContract(item)\">合同上传</el-button>\r\n");
      out.write("                            <el-tag v-if=\"item.tagInfo.tagStatus\" style=\"margin-right: 30px\">{{item.tagInfo.tagStatus}}</el-tag>\r\n");
      out.write("                            <el-button type=\"text\" class=\"signBtn\" @click=\"getSign(item,index)\"><i class=\"signIcon\"></i>标记({{item.tagInfo.count}})<i class=\"el-icon-arrow-right\"></i></el-button>\r\n");
      out.write("                            <el-button type=\"primary\" class=\"over\" @click=\"over(item)\">完结</el-button>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <div style=\"margin-top: 9px;text-align: right;\" v-show=\"item.busiStatus=='已完成'&&!item.evaluated\">\r\n");
      out.write("                            <el-button type=\"text\" class=\"signBtn\" icon=\"el-icon-upload\" style=\"margin-right: 18px\" @click=\"showUploadContract(item)\">合同上传</el-button>\r\n");
      out.write("                            <el-tag v-if=\"item.tagInfo.tagStatus\" style=\"margin-right: 30px\">{{item.tagInfo.tagStatus}}</el-tag>\r\n");
      out.write("                            <el-button type=\"text\" class=\"signBtn\" @click=\"getSign(item,index)\"><i class=\"signIcon\"></i>标记({{item.tagInfo.count}})<i class=\"el-icon-arrow-right\"></i></el-button>\r\n");
      out.write("                            ");
      out.write("\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <div style=\"margin-top: 9px;text-align: right;\" v-show=\"item.busiStatus=='已完成'&&item.evaluated\">\r\n");
      out.write("                            <el-button type=\"text\" class=\"signBtn\" icon=\"el-icon-upload\" style=\"margin-right: 18px\" @click=\"showUploadContract(item)\">合同上传</el-button>\r\n");
      out.write("                            <el-tag v-if=\"item.tagInfo.tagStatus\" style=\"margin-right: 30px\">{{item.tagInfo.tagStatus}}</el-tag>\r\n");
      out.write("                            <el-button type=\"text\" class=\"signBtn\" @click=\"getSign(item,index)\"><i class=\"signIcon\"></i>标记({{item.tagInfo.count}})<i class=\"el-icon-arrow-right\"></i></el-button>\r\n");
      out.write("                            <el-button type=\"text\" class=\"comment_btn\" @click=\"fold(item,index)\" style=\"margin-left: 33px\"><i class=\"comment_icon commented\"></i>{{item.commentShow?'收起评价':'已评价，查看'}}<i class=\"el-input__icon el-icon-arrow-down\" :class=\"{'is-reverse':item.commentShow}\"></i></el-button>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                    <div class=\"comment_container\" v-show=\"item.commentShow&&!item.evaluated\">\r\n");
      out.write("                        <p>发布评价</p>\r\n");
      out.write("                        <table>\r\n");
      out.write("                            <tr>\r\n");
      out.write("                                <td style=\"vertical-align: middle\">综合评价：</td>\r\n");
      out.write("                                <td>\r\n");
      out.write("                                    <el-radio class=\"radio\" v-model=\"item.commentType\"  label=\"5\" :name=\"'commentType_'+item.id\">好评</el-radio>\r\n");
      out.write("                                    <el-radio class=\"radio\" v-model=\"item.commentType\"  label=\"3\" :name=\"'commentType_'+item.id\">中评</el-radio>\r\n");
      out.write("                                    <el-radio class=\"radio\" v-model=\"item.commentType\"  label=\"1\"  :name=\"'commentType_'+item.id\">差评</el-radio>\r\n");
      out.write("                                </td>\r\n");
      out.write("                            </tr>\r\n");
      out.write("                            <tr>\r\n");
      out.write("                                <td style=\"padding-top: 17px\">增加描述：</td>\r\n");
      out.write("                                <td>\r\n");
      out.write("                                    <el-input\r\n");
      out.write("                                        type=\"textarea\"\r\n");
      out.write("                                        :rows=\"2\"\r\n");
      out.write("                                        :id=\"'commentText_'+item.id\"\r\n");
      out.write("                                        placeholder=\"请输入描述\"\r\n");
      out.write("                                        v-model=\"item.commentText\">\r\n");
      out.write("                                    </el-input>\r\n");
      out.write("                                </td>\r\n");
      out.write("                            </tr>\r\n");
      out.write("                        </table>\r\n");
      out.write("                        <el-row style=\"text-align: center;margin-top: 20px\">\r\n");
      out.write("                            <el-button type=\"primary\" class=\"over\" @click=\"comment(item,index)\">发布评论</el-button>\r\n");
      out.write("                            <el-button @click=\"fold(item,index)\">取消</el-button>\r\n");
      out.write("                        </el-row>\r\n");
      out.write("                    </div>\r\n");
      out.write("                    <div class=\"comment_container\" v-show=\"item.commentShow&&item.evaluated\">\r\n");
      out.write("                        <p>查看评价</p>\r\n");
      out.write("                        <table v-for=\"(comment,i) in item.commentList\">\r\n");
      out.write("                            <thead>\r\n");
      out.write("                                <tr>\r\n");
      out.write("                                    ");
      out.write("\r\n");
      out.write("                                    <th colspan=\"2\">对我的评价</th>\r\n");
      out.write("                                </tr>\r\n");
      out.write("                            </thead>\r\n");
      out.write("                            <tbody>\r\n");
      out.write("                                <tr>\r\n");
      out.write("                                    <td style=\"vertical-align: middle\">综合评价：</td>\r\n");
      out.write("                                    <td>\r\n");
      out.write("                                        {{COMMENT[comment.score]}}\r\n");
      out.write("                                    </td>\r\n");
      out.write("                                </tr>\r\n");
      out.write("                                <tr>\r\n");
      out.write("                                    <td style=\"vertical-align: middle;\">增加描述：</td>\r\n");
      out.write("                                    <td>\r\n");
      out.write("                                        {{comment.comment}}\r\n");
      out.write("                                    </td>\r\n");
      out.write("                                </tr>\r\n");
      out.write("                            </tbody>\r\n");
      out.write("                        </table>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("                <div style=\"padding: 50px 0;text-align: center\" v-show=\"!list||list.length==0\">\r\n");
      out.write("                    暂无相关数据\r\n");
      out.write("                </div>\r\n");
      out.write("                <div v-show=\"list&&list.length>0\" align=\"right\">\r\n");
      out.write("                    <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page.sync=\"pageIndex\" :page-sizes=\"[5,10,20,30,50]\" :page-size=\"pageSize\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\r\n");
      out.write("                    </el-pagination>\r\n");
      out.write("                </div>\r\n");
      out.write("\r\n");
      out.write("                <el-dialog\r\n");
      out.write("                        class=\"signDialog animated bounceInRight\"\r\n");
      out.write("                        :visible.sync=\"signDialogVisible\"\r\n");
      out.write("                        :modal-append-to-body=\"false\"\r\n");
      out.write("                        :modal=\"false\"\r\n");
      out.write("                        :before-close=\"closeSignDialog\"\r\n");
      out.write("                        width=\"320px\">\r\n");
      out.write("                    <span slot=\"title\" class=\"title\">标记</span>\r\n");
      out.write("                    <div class=\"entInfo\">\r\n");
      out.write("                        <p><em>单位：</em><b>{{signItem.releaseEntName}}</b></p>\r\n");
      out.write("                        <p><em>总数：</em><b><font color=\"#1171d1\">{{signItem.totalAmount}}</font></b></p>\r\n");
      out.write("                        <p><em>价格：</em><b><font color=\"#ff474c\">￥{{signItem.totalPrice}}</font></b></p>\r\n");
      out.write("                    </div>\r\n");
      out.write("                    <div class=\"editArea\">\r\n");
      out.write("                        <el-button-group>\r\n");
      out.write("                            <el-select v-model=\"signType\" placeholder=\"请选择标记类型\" style=\"float: left\">\r\n");
      out.write("                                <el-option\r\n");
      out.write("                                        v-for=\"item in signTypeList\"\r\n");
      out.write("                                        :key=\"item.code\"\r\n");
      out.write("                                        :label=\"item.value\"\r\n");
      out.write("                                        :value=\"item.code\">\r\n");
      out.write("                                </el-option>\r\n");
      out.write("                            </el-select>\r\n");
      out.write("                            <el-button type=\"primary\" @click=\"showSignForm\">新增标记</el-button>\r\n");
      out.write("                        </el-button-group>\r\n");
      out.write("                        <div class=\"sign_form\" v-if=\"signFormShow\">\r\n");
      out.write("                            <div class=\"sign_form_title\">添加{{SIGNTYPE[signType]}}标记</div>\r\n");
      out.write("                            <div class=\"sign_form_content\">\r\n");
      out.write("                                <el-input v-if=\"signType=='TAGING'\"\r\n");
      out.write("                                          type=\"textarea\"\r\n");
      out.write("                                          :rows=\"2\"\r\n");
      out.write("                                          placeholder=\"说点什么吧\"\r\n");
      out.write("                                          v-model=\"say\">\r\n");
      out.write("                                </el-input>\r\n");
      out.write("                                <div v-if=\"signType=='SAMPLING'\" align=\"center\">\r\n");
      out.write("                                    <el-date-picker\r\n");
      out.write("                                            v-model=\"sampleDate\"\r\n");
      out.write("                                            type=\"date\"\r\n");
      out.write("                                            align=\"right\"\r\n");
      out.write("                                            placeholder=\"请选择取样时间\">\r\n");
      out.write("                                    </el-date-picker>\r\n");
      out.write("                                    <el-input v-model=\"sampleName\" placeholder=\"请输入联系人姓名\"></el-input>\r\n");
      out.write("                                    <el-input v-model=\"sampleMobile\" placeholder=\"请输入联系人电话\"></el-input>\r\n");
      out.write("                                </div>\r\n");
      out.write("                                <div v-if=\"signType=='SAMPLE'\">\r\n");
      out.write("                                    <el-radio-group v-model=\"sampleStatus\">\r\n");
      out.write("                                        <el-radio label=\"SAMPLED\">已取样</el-radio>\r\n");
      out.write("                                        <el-radio label=\"DELIVERED_LAB\">已送实验室</el-radio><br/>\r\n");
      out.write("                                        <el-radio label=\"QUALIFIED\" style=\"margin-top: 10px\">合格</el-radio>\r\n");
      out.write("                                        <el-radio label=\"UNQUALIFIED\" style=\"margin-top: 10px;margin-left: 44px\">不合格</el-radio>\r\n");
      out.write("                                    </el-radio-group>\r\n");
      out.write("                                    <el-input type=\"textarea\" style=\"margin-top: 10px\"\r\n");
      out.write("                                              :rows=\"2\"\r\n");
      out.write("                                              placeholder=\"备注\"\r\n");
      out.write("                                              v-model=\"sampleRemark\">\r\n");
      out.write("                                    </el-input>\r\n");
      out.write("                                </div>\r\n");
      out.write("                                <el-radio-group v-model=\"contractStatus\" v-if=\"signType=='CONTRACT'\">\r\n");
      out.write("                                    <el-radio label=\"DRAFTCONTRACT\">合同已拟定</el-radio>\r\n");
      out.write("                                    <el-radio label=\"DELIVERYCONTRACT\">合同已寄出</el-radio><br/>\r\n");
      out.write("                                    <el-radio label=\"SIGNCONTRACT\" style=\"margin-top: 10px\">合同已签定</el-radio>\r\n");
      out.write("                                </el-radio-group>\r\n");
      out.write("                                <el-input v-if=\"signType=='PRICE'\"\r\n");
      out.write("                                          type=\"textarea\"\r\n");
      out.write("                                          :rows=\"2\"\r\n");
      out.write("                                          placeholder=\"备注\"\r\n");
      out.write("                                          v-model=\"priceRemark\">\r\n");
      out.write("                                </el-input>\r\n");
      out.write("                            </div>\r\n");
      out.write("                            <div class=\"sign_form_btn\">\r\n");
      out.write("                                <el-button type=\"primary\" size=\"small\" style=\"height: 30px\" @click=\"saveSign\">保存</el-button>\r\n");
      out.write("                            </div>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                    <div class=\"signTimeLine\" v-loading=\"signDialogloading\"\r\n");
      out.write("                         element-loading-spinner=\"el-icon-loading\"\r\n");
      out.write("                         element-loading-background=\"rgba(246, 247, 251, 0.8)\">\r\n");
      out.write("                        <el-steps direction=\"vertical\" :active=\"1\" v-if=\"signList.length>0\">\r\n");
      out.write("                            <el-step v-for=\"(item,index) in signList\">\r\n");
      out.write("                                <div slot=\"title\" class=\"signTitle\">\r\n");
      out.write("                                    <span class=\"signTime\">{{item.createTime.substring(0,16)}}</span>\r\n");
      out.write("                                    <span class=\"signCreate\">{{item.createBy}}</span>\r\n");
      out.write("                                    <el-button type=\"text\" class=\"el-icon-delete\" title=\"删除该标记\" @click=\"delSign(item.id)\"></el-button>\r\n");
      out.write("                                </div>\r\n");
      out.write("                                <div slot=\"description\" class=\"signContent\" v-if=\"item.tagType=='TAGING'\">\r\n");
      out.write("                                    {{item.comments}}\r\n");
      out.write("                                </div>\r\n");
      out.write("                                <div slot=\"description\" class=\"signContent\" v-if=\"item.tagType=='SAMPLING'\">\r\n");
      out.write("                                    取样时间：{{item.sampleDate?item.sampleDate.substring(0,10):''}}<br/>\r\n");
      out.write("                                    联系人：{{item.contacts}}<br/>\r\n");
      out.write("                                    联系电话：{{item.contactsTel}}\r\n");
      out.write("                                </div>\r\n");
      out.write("                                <div slot=\"description\" class=\"signContent\" v-if=\"item.tagType=='SAMPLE'\">\r\n");
      out.write("                                    <div v-if=\"item.comments&&item.comments.split('#').length>1\">\r\n");
      out.write("                                        <div>{{item.comments.split('#')[0]}}</div>\r\n");
      out.write("                                        <div><span style=\"font-size: 12px;color: #6b7580;\">备注：</span>{{item.comments.split('#')[1]}}</div>\r\n");
      out.write("                                    </div>\r\n");
      out.write("                                    <span v-else>{{item.comments}}</span>\r\n");
      out.write("                                </div>\r\n");
      out.write("                                <div slot=\"description\" class=\"signContent\" v-if=\"item.tagType=='CONTRACT'\">\r\n");
      out.write("                                    {{TAGSTATUS[item.busiStatus]}}\r\n");
      out.write("                                </div>\r\n");
      out.write("                                <div slot=\"description\" class=\"signContent\" v-if=\"item.tagType=='TERMINATE'\">\r\n");
      out.write("                                    {{TAGSTATUS[item.tagType]}}\r\n");
      out.write("                                </div>\r\n");
      out.write("                                <div slot=\"description\" class=\"signContent\" v-if=\"item.tagType=='PRICE'\">\r\n");
      out.write("                                    <div v-if=\"item.comments&&item.comments.split('#').length>1\">\r\n");
      out.write("                                        <div>{{item.comments.split('#')[0]}}</div>\r\n");
      out.write("                                        <div><span style=\"font-size: 12px;color: #6b7580;\">备注：</span>{{item.comments.split('#')[1]}}</div>\r\n");
      out.write("                                    </div>\r\n");
      out.write("                                    <span v-else>{{item.comments}}</span>\r\n");
      out.write("                                </div>\r\n");
      out.write("                            </el-step>\r\n");
      out.write("                        </el-steps>\r\n");
      out.write("                        <span v-else style=\"display: inline-block;text-align: center;width: 100%;\">暂无标记信息</span>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </el-dialog>\r\n");
      out.write("                <el-dialog\r\n");
      out.write("                        title=\"合同上传\"\r\n");
      out.write("                        :visible.sync=\"imgUploadVisible\"\r\n");
      out.write("                        width=\"600px\">\r\n");
      out.write("                    <el-upload\r\n");
      out.write("                            class=\"upload-demo\"\r\n");
      out.write("                            ref=\"contractUpload\"\r\n");
      out.write("                            drag\r\n");
      out.write("                            :data=\"contractParam\"\r\n");
      out.write("                            :action=\"uploadAction\"\r\n");
      out.write("                            :on-success=\"contractUploadSuccess\"\r\n");
      out.write("                            :auto-upload=\"false\"\r\n");
      out.write("                            :file-list=\"fileList\"\r\n");
      out.write("                            :on-remove=\"handleRemove\"\r\n");
      out.write("                            :on-preview=\"downloadFile\"\r\n");
      out.write("                            :limit=\"1\"\r\n");
      out.write("                           >\r\n");
      out.write("                        <i class=\"el-icon-upload\"></i>\r\n");
      out.write("                        <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\r\n");
      out.write("                    </el-upload>\r\n");
      out.write("                    <span slot=\"footer\" class=\"dialog-footer\">\r\n");
      out.write("                        <el-button @click=\"imgUploadVisible = false\">取 消</el-button>\r\n");
      out.write("                        <el-button type=\"primary\" @click=\"uploadContract\">确 定</el-button>\r\n");
      out.write("                      </span>\r\n");
      out.write("                </el-dialog>\r\n");
      out.write("            </template>\r\n");
      out.write("        </div>\r\n");
      out.write("        </body>\r\n");
      out.write("        <!-- 先引入 Vue -->\r\n");
      out.write("        <script src=\"");
      out.print(appPath);
      out.write("/main/common/elementui/vue.js\"></script>\r\n");
      out.write("        <!-- 引入组件库 -->\r\n");
      out.write("        <script src=\"");
      out.print(appPath);
      out.write("/main/common/elementui/index.js\"></script>\r\n");
      out.write("        <script src=\"");
      out.print(appPath );
      out.write("/app/js/constants.js\"></script>\r\n");
      out.write("        <script src=\"");
      out.print(appPath);
      out.write("/main/common/upload/upload.js\"></script>\r\n");
      out.write("        <script src=\"");
      out.print(appPath );
      out.write("/thirdparty/la-number/la-number.js\"></script>\r\n");
      out.write("        <script>\r\n");
      out.write("            var vue=new Vue({\r\n");
      out.write("                el: '#app',\r\n");
      out.write("                data: {\r\n");
      out.write("                    list:[],\r\n");
      out.write("                    total: null,\r\n");
      out.write("                    listLoading: true,\r\n");
      out.write("                    tableData:[],\r\n");
      out.write("                    statusClass:orderStatusClass,\r\n");
      out.write("                    pageIndex:1,\r\n");
      out.write("                    pageSize:5,\r\n");
      out.write("                    orderStatus:'',\r\n");
      out.write("                    dateType:'',\r\n");
      out.write("                    startDateTime:'',\r\n");
      out.write("                    endDateTime:'',\r\n");
      out.write("                    managerType:'',\r\n");
      out.write("                    activityId:'',\r\n");
      out.write("                    managerList: [],\r\n");
      out.write("                    manager: '',\r\n");
      out.write("                    entList:[],\r\n");
      out.write("                    activityList:[],\r\n");
      out.write("                    entId:'',\r\n");
      out.write("                    myEntId:'',\r\n");
      out.write("                    COMMENT:COMMENT,\r\n");
      out.write("                    orderTotal:null,\r\n");
      out.write("                    signDialogVisible:false,\r\n");
      out.write("                    signDialogloading:false,\r\n");
      out.write("                    signType:'',\r\n");
      out.write("                    signTypeList:[],\r\n");
      out.write("                    SIGNTYPE:SIGNTYPE,\r\n");
      out.write("                    say:'',\r\n");
      out.write("                    sampleDate:'',\r\n");
      out.write("                    sampleName:'',\r\n");
      out.write("                    sampleMobile:'',\r\n");
      out.write("                    sampleStatus:'DELIVERED_LAB',\r\n");
      out.write("                    signFormShow:false,\r\n");
      out.write("                    signItem:{},\r\n");
      out.write("                    signList:[],\r\n");
      out.write("                    TAGSTATUS:TAGSTATUS,\r\n");
      out.write("                    contractStatus:'DRAFTCONTRACT',\r\n");
      out.write("                    imgUploadVisible:false,\r\n");
      out.write("                    uploadAction:upload.IMG_URL+'/upload',\r\n");
      out.write("                    contractParam:{'appKey':APPKEY,'prodID':PRODID,businessCode:''},\r\n");
      out.write("                    fileList:[],\r\n");
      out.write("                    priceRemark:''\r\n");
      out.write("                },\r\n");
      out.write("                created: function () {\r\n");
      out.write("                    this.getList();\r\n");
      out.write("                    this.getManagerList();\r\n");
      out.write("                    this.getEntList();\r\n");
      out.write("                    this.getActivityList();\r\n");
      out.write("                },\r\n");
      out.write("                methods: {\r\n");
      out.write("                    getList: function () {\r\n");
      out.write("                        this.listLoading = true;\r\n");
      out.write("                        var _this = this;\r\n");
      out.write("                        var param=this.getParamInfo()||{};\r\n");
      out.write("                        param.pageIndex=this.pageIndex;\r\n");
      out.write("                        param.pageSize=this.pageSize;\r\n");
      out.write("                        ajax({\r\n");
      out.write("                            url: '/entOrders/listOrderByInquiryEntId.htm',\r\n");
      out.write("                            dataType: 'json',\r\n");
      out.write("                            data:param,\r\n");
      out.write("                            success: function (result) {\r\n");
      out.write("                                console.log(result);\r\n");
      out.write("                                _this.listLoading = false;\r\n");
      out.write("                                if (result.status == 1) {\r\n");
      out.write("                                    var orderList=result.data.orderList;\r\n");
      out.write("                                    for(var i in orderList){\r\n");
      out.write("                                        orderList[i]['commentShow']=false;\r\n");
      out.write("                                        orderList[i]['commentType']='good';\r\n");
      out.write("                                        orderList[i]['commentText']='';\r\n");
      out.write("                                        orderList[i]['commentLoaded']=false;\r\n");
      out.write("                                        orderList[i]['commentList']=[];\r\n");
      out.write("                                    }\r\n");
      out.write("                                    _this.list=orderList;\r\n");
      out.write("                                    _this.total=result.data.paging.totalRecord;\r\n");
      out.write("                                }\r\n");
      out.write("                            }\r\n");
      out.write("                        })\r\n");
      out.write("                    },\r\n");
      out.write("                    getOrderTotal:function () {\r\n");
      out.write("                        var _this = this;\r\n");
      out.write("                        var param=this.getParamInfo()||{};\r\n");
      out.write("                        ajax({\r\n");
      out.write("                            url: '/entOrders/countOrderWasteAmount4InquiryEnt.htm',\r\n");
      out.write("                            dataType: 'json',\r\n");
      out.write("                            data:param,\r\n");
      out.write("                            success: function (result) {\r\n");
      out.write("                                console.log(result);\r\n");
      out.write("                                if (result.status == 1) {\r\n");
      out.write("                                    _this.orderTotal=result.data;\r\n");
      out.write("                                }\r\n");
      out.write("                            }\r\n");
      out.write("                        })\r\n");
      out.write("                    },\r\n");
      out.write("                    getParamInfo:function () {\r\n");
      out.write("                        var param={\r\n");
      out.write("                            orderStatus:this.orderStatus,\r\n");
      out.write("                            dateType: this.dateType,\r\n");
      out.write("                            startDateTime:this.startDateTime?this.startDateTime.format('yyyy-MM-dd hh:mm:ss'):'',\r\n");
      out.write("                            endDateTime:this.endDateTime?(this.endDateTime.format('yyyy-MM-dd')+' 23:59:59'):'',\r\n");
      out.write("                            inquiryPersonId:this.manager,\r\n");
      out.write("                            activityId:this.activityId,\r\n");
      out.write("                            releaseEntId:this.entId=='all'?'':this.entId\r\n");
      out.write("                        }\r\n");
      out.write("                        return param;\r\n");
      out.write("                    },\r\n");
      out.write("                    getManagerList:function () {\r\n");
      out.write("                        var _this=this;\r\n");
      out.write("                        ajax({\r\n");
      out.write("                            url:'/entOrders/listInquiryPerson',\r\n");
      out.write("                            dataType: 'json',\r\n");
      out.write("                            success:function (data) {\r\n");
      out.write("                                _this.managerList=data.data;\r\n");
      out.write("                            }\r\n");
      out.write("                        });\r\n");
      out.write("                    },\r\n");
      out.write("                    showSignForm:function () {\r\n");
      out.write("                        if(this.signType==''){\r\n");
      out.write("                            $.notify('请选择标记类型',{status:'info',timeout:2500});\r\n");
      out.write("                            return;\r\n");
      out.write("                        }\r\n");
      out.write("                        this.signFormShow=true;\r\n");
      out.write("                    },\r\n");
      out.write("                    delSign:function (id) {\r\n");
      out.write("                        ajax({\r\n");
      out.write("                            url:'/discussTag/deleteDiscussTag',\r\n");
      out.write("                            data:{\r\n");
      out.write("                                id:id\r\n");
      out.write("                            },\r\n");
      out.write("                            success:function (result) {\r\n");
      out.write("                                if(result.status&&result.data){\r\n");
      out.write("                                    $.notify('删除标记成功',{status:'success',timeout:2500});\r\n");
      out.write("                                    vue.getSignList();\r\n");
      out.write("                                }\r\n");
      out.write("                            }\r\n");
      out.write("                        });\r\n");
      out.write("                    },\r\n");
      out.write("                    saveSign:function () {\r\n");
      out.write("                        var param={\r\n");
      out.write("                            releaseId:this.signItem.releaseId,\r\n");
      out.write("                            tagType:this.signType\r\n");
      out.write("                        }\r\n");
      out.write("                        switch (this.signType){\r\n");
      out.write("                            case 'TAGING':\r\n");
      out.write("                                param.comments=this.say;\r\n");
      out.write("                                param.tagStatus='TAGGING';\r\n");
      out.write("                                break;\r\n");
      out.write("                            case 'SAMPLING':\r\n");
      out.write("                                param.sampleDate=this.sampleDate;\r\n");
      out.write("                                param.contacts=this.sampleName;\r\n");
      out.write("                                param.contactsTel=this.sampleMobile;\r\n");
      out.write("                                param.tagStatus='SAMPLING';\r\n");
      out.write("                                break;\r\n");
      out.write("                            case 'SAMPLE':\r\n");
      out.write("                                param.tagStatus=this.sampleStatus;\r\n");
      out.write("                                param.comments=this.TAGSTATUS[this.sampleStatus]+'#'+this.sampleRemark;\r\n");
      out.write("                                break;\r\n");
      out.write("                            case 'CONTRACT':\r\n");
      out.write("                                param.tagStatus=this.contractStatus;\r\n");
      out.write("                                break;\r\n");
      out.write("                            case 'TERMINATE':\r\n");
      out.write("                                param.tagStatus='TERMINATE';\r\n");
      out.write("                                break;\r\n");
      out.write("                            case 'PRICE':\r\n");
      out.write("                                param.tagStatus='PRICE';\r\n");
      out.write("                                param.comments='报价#'+this.priceRemark;\r\n");
      out.write("                                break;\r\n");
      out.write("                        }\r\n");
      out.write("                        ajax({\r\n");
      out.write("                            url:'/discussTag/saveDiscussTag.htm?ticketId=");
      out.print(ticketId);
      out.write("',\r\n");
      out.write("                            data:JSON.stringify(param),\r\n");
      out.write("                            contentType:'application/json',\r\n");
      out.write("                            success:function (result) {\r\n");
      out.write("                                if(result.status&&result.data){\r\n");
      out.write("                                    $.notify('添加标记成功',{status:'success',timeout:2500});\r\n");
      out.write("                                    vue.getSignList();\r\n");
      out.write("                                    vue.signFormShow=false;\r\n");
      out.write("                                }\r\n");
      out.write("                            }\r\n");
      out.write("                        });\r\n");
      out.write("                    },\r\n");
      out.write("                    getSignList:function () {\r\n");
      out.write("                        vue.signList=[];\r\n");
      out.write("                        this.signDialogloading=true;\r\n");
      out.write("                        ajax({\r\n");
      out.write("                            url:'/discussTag/listDiscussTag',\r\n");
      out.write("                            data:{\r\n");
      out.write("                                releaseId:this.signItem.releaseId\r\n");
      out.write("                            },\r\n");
      out.write("                            success:function (result) {\r\n");
      out.write("                                vue.signDialogloading=false;\r\n");
      out.write("                                console.log(result);\r\n");
      out.write("                                if(result.status==1){\r\n");
      out.write("                                    vue.signList=result.data;\r\n");
      out.write("                                    var busiStatus='';\r\n");
      out.write("                                    if(result.data.length>0){\r\n");
      out.write("                                        busiStatus=result.data[0]['busiStatus'];\r\n");
      out.write("                                    }\r\n");
      out.write("                                    if(!vue.signItem.tagInfo){\r\n");
      out.write("                                        vue.signItem.tagInfo={'count':0,tagStatus:''};\r\n");
      out.write("                                    }\r\n");
      out.write("                                    vue.signItem.tagInfo.tagStatus=TAGSTATUS[busiStatus];\r\n");
      out.write("                                    vue.signItem.tagInfo.count=result.data.length;\r\n");
      out.write("                                    Vue.set(vue.list,vue.signItem.index,vue.signItem);\r\n");
      out.write("                                }\r\n");
      out.write("                            }\r\n");
      out.write("                        });\r\n");
      out.write("                    },\r\n");
      out.write("                    getSign:function (item,index) {\r\n");
      out.write("                        item.index=index;\r\n");
      out.write("                        this.signItem=item;\r\n");
      out.write("                        this.signDialogVisible=true;\r\n");
      out.write("                        this.signFormShow=false;\r\n");
      out.write("                        this.signType='';\r\n");
      out.write("                        $('body').css('overflow-y','hidden');\r\n");
      out.write("                        var heights=document.body.clientHeight;\r\n");
      out.write("                        if(this.signTypeList.length==0){\r\n");
      out.write("                            this.getSignTypeList();\r\n");
      out.write("                        }\r\n");
      out.write("                        this.getSignList();\r\n");
      out.write("                        setTimeout(function () {\r\n");
      out.write("                            $('.signTimeLine').css('max-height',heights-353+'px');\r\n");
      out.write("                        },300)\r\n");
      out.write("                    },\r\n");
      out.write("                    closeSignDialog:function () {\r\n");
      out.write("                        this.signDialogVisible=false;\r\n");
      out.write("                        setTimeout(function () {\r\n");
      out.write("                            $('body').css('overflow-y','auto');\r\n");
      out.write("                        },500);\r\n");
      out.write("                    },\r\n");
      out.write("                    getSignTypeList:function () {\r\n");
      out.write("                        var _this=this;\r\n");
      out.write("                        ajax({\r\n");
      out.write("                            url:'/codeType/listCodeValue',\r\n");
      out.write("                            data:{\r\n");
      out.write("                                typeCode:'TAG_TYPE'\r\n");
      out.write("                            },\r\n");
      out.write("                            success:function (result) {\r\n");
      out.write("                                console.log(result);\r\n");
      out.write("                                if(result.status==1){\r\n");
      out.write("                                    _this.signTypeList=result.data;\r\n");
      out.write("                                }\r\n");
      out.write("                            }\r\n");
      out.write("                        })\r\n");
      out.write("                    },\r\n");
      out.write("                    getEntList:function () {\r\n");
      out.write("                        var _this=this;\r\n");
      out.write("                        ajax({\r\n");
      out.write("                            url:'/entOrders/listReleaseEnt',\r\n");
      out.write("                            dataType: 'json',\r\n");
      out.write("                            success:function (data) {\r\n");
      out.write("                                var obj={'entName':'全部企业',entId:'all'};\r\n");
      out.write("                                var arr=[obj];\r\n");
      out.write("                                arr=arr.concat(data.data);\r\n");
      out.write("                                _this.entList=arr;\r\n");
      out.write("                            }\r\n");
      out.write("                        });\r\n");
      out.write("                    },\r\n");
      out.write("                    getActivityList:function(){\r\n");
      out.write("                        var _this=this;\r\n");
      out.write("                        ajax({\r\n");
      out.write("                            url:'/wasteActivity/listOrderActiviyName',\r\n");
      out.write("                            dataType: 'json',\r\n");
      out.write("                            success:function (data) {\r\n");
      out.write("                                var obj={'activityName':'全部',activityId:''};\r\n");
      out.write("                                var defaultObj ={'activityName':'资源池',activityId:'resourcePull'};\r\n");
      out.write("                                var arr=[obj,defaultObj];\r\n");
      out.write("                                arr=arr.concat(data.data);\r\n");
      out.write("                                _this.activityList = arr;\r\n");
      out.write("                            }\r\n");
      out.write("                        });\r\n");
      out.write("                    },\r\n");
      out.write("                    entDetail:function (entId,facilitatorEntId) {\r\n");
      out.write("                        var facilitatorEntId=facilitatorEntId?('&facilitatorEntId='+facilitatorEntId):'';\r\n");
      out.write("                        window.location='");
      out.print(appPath);
      out.write("/myenterprise/viewEnterpriseDetail.htm?ticketId=");
      out.print(ticketId);
      out.write("&onlyViewFlg=true&enterpriseId='+entId+'&breadcrumbName=我的订单'+facilitatorEntId;\r\n");
      out.write("                    },\r\n");
      out.write("                    viewActivityDetail:function (activityId) {\r\n");
      out.write("                        window.location='");
      out.print(appPath);
      out.write("/main/pc/view/wasteActivityDetail.html?ticketId=");
      out.print(ticketId);
      out.write("&activityId='+activityId;\r\n");
      out.write("                    },\r\n");
      out.write("                    search:function () {\r\n");
      out.write("                        this.pageIndex=1;\r\n");
      out.write("                        this.list=[];\r\n");
      out.write("                        this.getList();\r\n");
      out.write("                        this.getOrderTotal();\r\n");
      out.write("                    },\r\n");
      out.write("                    queryStatus:function (status) {\r\n");
      out.write("                        this.orderStatus=status;\r\n");
      out.write("                        this.search();\r\n");
      out.write("                    },\r\n");
      out.write("                    queryManagerType:function (managerType) {\r\n");
      out.write("                      this.managerType=managerType;\r\n");
      out.write("                      if(this.managerType==''){\r\n");
      out.write("                          this.manager='';\r\n");
      out.write("                      }else if(this.managerType=='my'){\r\n");
      out.write("                          this.manager=window.globalInit.userId;\r\n");
      out.write("                      }\r\n");
      out.write("                      this.managerChange();\r\n");
      out.write("                    },\r\n");
      out.write("                    managerChange:function () {\r\n");
      out.write("                        if(this.manager==''){\r\n");
      out.write("                            this.managerType='';\r\n");
      out.write("                        }else if(this.manager==window.globalInit.userId){\r\n");
      out.write("                            this.managerType='my';\r\n");
      out.write("                        }else{\r\n");
      out.write("                            this.managerType='other';\r\n");
      out.write("                        }\r\n");
      out.write("                      this.search();\r\n");
      out.write("                    },\r\n");
      out.write("                    entChange:function () {\r\n");
      out.write("                        this.search();\r\n");
      out.write("                    },\r\n");
      out.write("                    activityNameChange:function(){\r\n");
      out.write("                        this.search();\r\n");
      out.write("                    },\r\n");
      out.write("                    fold:function(item,index){\r\n");
      out.write("                      item.commentShow=!item.commentShow;\r\n");
      out.write("                      if(item.evaluated&&item.commentShow&&!item.commentLoaded){\r\n");
      out.write("                          if(!this.myEntId){\r\n");
      out.write("                              this.myEntId=window.globalInit.enterpriseId;\r\n");
      out.write("                          }\r\n");
      out.write("                          ajax({\r\n");
      out.write("                              url:'/entEvaluate/listEntEvaluate.htm',\r\n");
      out.write("                              data:{\r\n");
      out.write("                                  orderId:item.id\r\n");
      out.write("                              },\r\n");
      out.write("                              success:function (data) {\r\n");
      out.write("                                  if(data.status==1){\r\n");
      out.write("                                      item.commentList=data.data;\r\n");
      out.write("                                      item.commentLoaded=true;\r\n");
      out.write("                                  }\r\n");
      out.write("                                  Vue.set(vue.list, index, item);\r\n");
      out.write("                              }\r\n");
      out.write("                          });\r\n");
      out.write("                      }else{\r\n");
      out.write("                          Vue.set(vue.list, index, item);\r\n");
      out.write("                      }\r\n");
      out.write("                    },\r\n");
      out.write("                    comment:function (item,index) {\r\n");
      out.write("                        var id=item.id;\r\n");
      out.write("                        var name='commentType_'+id;\r\n");
      out.write("                        var commentTypeList=$('[name='+name+']');\r\n");
      out.write("                        var commentType='';\r\n");
      out.write("                        for(var i in commentTypeList){\r\n");
      out.write("                            var commentTypeInput=commentTypeList.eq(i);\r\n");
      out.write("                            if(commentTypeInput.parent().hasClass('is-checked')){\r\n");
      out.write("                                commentType=commentTypeInput.val();\r\n");
      out.write("                            }\r\n");
      out.write("                        }\r\n");
      out.write("                        var commentText=$('textarea#commentText_'+id).val();\r\n");
      out.write("                        console.log(commentType+' '+commentText);\r\n");
      out.write("                        if(!commentType){\r\n");
      out.write("                            $.notify('请选择综合评价',{status:'info',timeout:1000});\r\n");
      out.write("                            return;\r\n");
      out.write("                        }\r\n");
      out.write("                        if(!commentText){\r\n");
      out.write("                            $.notify('请填写评价描述',{status:'info',timeout:1000});\r\n");
      out.write("                            return;\r\n");
      out.write("                        }\r\n");
      out.write("                        ajax({\r\n");
      out.write("                            url:'/entEvaluate/addEntEvaluate',\r\n");
      out.write("                            data:{\r\n");
      out.write("                                orderId:id,\r\n");
      out.write("                                score:commentType,\r\n");
      out.write("                                comment:commentText,\r\n");
      out.write("                                evaluatedEntId:item.releaseEntId,\r\n");
      out.write("                                evaluatedBy:item.inquiryEntId\r\n");
      out.write("                            },\r\n");
      out.write("                            success:function (data) {\r\n");
      out.write("                                if(data.status==1&&data.data){\r\n");
      out.write("                                    $.notify('评价成功',{status:'success',timeout:1000});\r\n");
      out.write("                                    item.evaluated=true;\r\n");
      out.write("                                    item.commentShow=false;\r\n");
      out.write("                                    Vue.set(vue.list, index, item);\r\n");
      out.write("                                }\r\n");
      out.write("                            }\r\n");
      out.write("                        });\r\n");
      out.write("                    },\r\n");
      out.write("                    over:function (item) {\r\n");
      out.write("                        vue.$confirm('此操作将完结该订单, 是否确定?', '提示', {\r\n");
      out.write("                            confirmButtonText: '确定',\r\n");
      out.write("                            cancelButtonText: '取消',\r\n");
      out.write("                            type: 'warning'\r\n");
      out.write("                        }).then(function(){\r\n");
      out.write("                            ajax({\r\n");
      out.write("                                url:'/entOrders/closeOrder.htm',\r\n");
      out.write("                                data:{\r\n");
      out.write("                                    orderId:item.id,\r\n");
      out.write("                                    releaseEntId:item.releaseEntId\r\n");
      out.write("                                },\r\n");
      out.write("                                dataType:'json',\r\n");
      out.write("                                success:function (data) {\r\n");
      out.write("                                    if(data.status==1&&data.data==true){\r\n");
      out.write("                                        $.notify('完结成功',{status:'success',timeout:2500});\r\n");
      out.write("                                        vue.pageIndex=1;\r\n");
      out.write("                                        vue.getList();\r\n");
      out.write("                                    }\r\n");
      out.write("                                }\r\n");
      out.write("                            })\r\n");
      out.write("                        }).catch(function(){});\r\n");
      out.write("                    },\r\n");
      out.write("                    contact:function (entId,releaseEntName) {\r\n");
      out.write("                        getEnterpriseContacts(entId,releaseEntName,'处置单位我的订单');\r\n");
      out.write("                    },\r\n");
      out.write("                    queryDateType:function (dateType) {\r\n");
      out.write("                        this.dateType=dateType;\r\n");
      out.write("                        this.startDateTime='';\r\n");
      out.write("                        this.endDateTime='';\r\n");
      out.write("                        this.search();\r\n");
      out.write("                    },\r\n");
      out.write("                    changeDate:function () {\r\n");
      out.write("                        this.dateType='';\r\n");
      out.write("                        this.search();\r\n");
      out.write("                    },\r\n");
      out.write("                    handleSizeChange:function(val) {\r\n");
      out.write("                        this.pageSize = val\r\n");
      out.write("                        this.getList()\r\n");
      out.write("                    },\r\n");
      out.write("                    handleCurrentChange:function(val) {\r\n");
      out.write("                        this.pageIndex = val\r\n");
      out.write("                        this.getList()\r\n");
      out.write("                    },\r\n");
      out.write("                    handleFilter:function() {\r\n");
      out.write("                        this.getList()\r\n");
      out.write("                    },\r\n");
      out.write("                    showUploadContract:function (item) {\r\n");
      out.write("                        this.$refs.contractUpload&&this.$refs.contractUpload.clearFiles();\r\n");
      out.write("                        this.contractParam.businessCode=item.id;\r\n");
      out.write("                        this.getContractList(item.id);\r\n");
      out.write("                        this.imgUploadVisible=true;\r\n");
      out.write("                    },\r\n");
      out.write("                    getContractList:function (id) {\r\n");
      out.write("                        this.fileList=[];\r\n");
      out.write("                        var fileList=upload.getImgListByBusinessCode(id);\r\n");
      out.write("                        for(var i in fileList){\r\n");
      out.write("                            var obj=fileList[i];\r\n");
      out.write("                            obj.name=obj.fileName;\r\n");
      out.write("                            obj.url=IMG_VIEW_URL+'&fileID='+obj['fileID'];\r\n");
      out.write("                            this.fileList.push(obj);\r\n");
      out.write("                        }\r\n");
      out.write("                    },\r\n");
      out.write("                    handleRemove:function (file, fileList) {\r\n");
      out.write("                        console.log(file,fileList);\r\n");
      out.write("                        upload.delete(file.fileID);\r\n");
      out.write("                        this.fileList.splice(0,1);\r\n");
      out.write("                        ajax({\r\n");
      out.write("                            url:'/entOrders/deleteUploadContract.htm',\r\n");
      out.write("                            data:{orderId:this.contractParam.businessCode},\r\n");
      out.write("                            success:function (result) {\r\n");
      out.write("                                if(result.status==1&&result.data){\r\n");
      out.write("\r\n");
      out.write("                                }\r\n");
      out.write("                            }\r\n");
      out.write("                        })\r\n");
      out.write("                    },\r\n");
      out.write("                    downloadFile:function (file) {\r\n");
      out.write("                      upload.download(file.fileID);\r\n");
      out.write("                    },\r\n");
      out.write("                    uploadContract:function () {\r\n");
      out.write("                        this.$refs.contractUpload.submit();\r\n");
      out.write("                    },\r\n");
      out.write("                    contractUploadSuccess:function (response, file, fileList) {\r\n");
      out.write("                        if(!file.response.success){\r\n");
      out.write("                            $.notify('合同文件上传失败',{status:'danger',timeout:1000});\r\n");
      out.write("                            return;\r\n");
      out.write("                        }\r\n");
      out.write("                        var obj=file.response.message;\r\n");
      out.write("                        console.log(obj);\r\n");
      out.write("                        $.notify('合同文件上传成功',{status:'success',timeout:2000});\r\n");
      out.write("                        this.imgUploadVisible=false;\r\n");
      out.write("                        ajax({\r\n");
      out.write("                           url:'/entOrders/updateContractStatus.htm',\r\n");
      out.write("                            data:{orderId:this.contractParam.businessCode},\r\n");
      out.write("                            success:function (result) {\r\n");
      out.write("                               console.log(result);\r\n");
      out.write("                                if(result.status==1&&result.data){\r\n");
      out.write("\r\n");
      out.write("                                }\r\n");
      out.write("                            }\r\n");
      out.write("                        })\r\n");
      out.write("                    },\r\n");
      out.write("                    fmoney:function(s, n) {  //s:传入的float数字 ，n:希望返回小数点几位\r\n");
      out.write("                        n = n > 0 && n <= 20 ? n : 2;\r\n");
      out.write("                        s = parseFloat((s + \"\").replace(/[^\\d\\.-]/g, \"\")).toFixed(n) + \"\";\r\n");
      out.write("                        var l = s.split(\".\")[0].split(\"\").reverse(),\r\n");
      out.write("                            r = s.split(\".\")[1];\r\n");
      out.write("                        t = \"\";\r\n");
      out.write("                        for (var i = 0; i < l.length; i++) {\r\n");
      out.write("                            t += l[i] + ((i + 1) % 3 == 0 && (i + 1) != l.length ? \",\" : \"\");\r\n");
      out.write("                        }\r\n");
      out.write("                        return t.split(\"\").reverse().join(\"\") + \".\" + r;\r\n");
      out.write("                    }\r\n");
      out.write("                }\r\n");
      out.write("\r\n");
      out.write("            })\r\n");
      out.write("        </script>\r\n");
      out.write("    </div>\r\n");
      out.write("</section>\r\n");
      out.write("\r\n");
      out.write('\r');
      out.write('\n');
      org.apache.jasper.runtime.JspRuntimeLibrary.include(request, response, "/common/webCommon/bottom.jsp", out, true);
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("    $(document).ready(function () {\r\n");
      out.write("        var rs = window.globalInit();\r\n");
      out.write("        rs.done(function () {\r\n");
      out.write("        });\r\n");
      out.write("    });\r\n");
      out.write("    Date.prototype.format = function(fmt) {\r\n");
      out.write("        var o = {\r\n");
      out.write("            \"M+\" : this.getMonth()+1,                 //月份\r\n");
      out.write("            \"d+\" : this.getDate(),                    //日\r\n");
      out.write("            \"h+\" : this.getHours(),                   //小时\r\n");
      out.write("            \"m+\" : this.getMinutes(),                 //分\r\n");
      out.write("            \"s+\" : this.getSeconds(),                 //秒\r\n");
      out.write("            \"q+\" : Math.floor((this.getMonth()+3)/3), //季度\r\n");
      out.write("            \"S\"  : this.getMilliseconds()             //毫秒\r\n");
      out.write("        };\r\n");
      out.write("        if(/(y+)/.test(fmt)) {\r\n");
      out.write("            fmt=fmt.replace(RegExp.$1, (this.getFullYear()+\"\").substr(4 - RegExp.$1.length));\r\n");
      out.write("        }\r\n");
      out.write("        for(var k in o) {\r\n");
      out.write("            if(new RegExp(\"(\"+ k +\")\").test(fmt)){\r\n");
      out.write("                fmt = fmt.replace(RegExp.$1, (RegExp.$1.length==1) ? (o[k]) : ((\"00\"+ o[k]).substr((\"\"+ o[k]).length)));\r\n");
      out.write("            }\r\n");
      out.write("        }\r\n");
      out.write("        return fmt;\r\n");
      out.write("    }\r\n");
      out.write("</script>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try { out.clearBuffer(); } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
