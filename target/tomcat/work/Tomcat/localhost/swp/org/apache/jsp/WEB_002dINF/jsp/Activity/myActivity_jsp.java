/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.47
 * Generated at: 2018-08-24 05:20:05 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.WEB_002dINF.jsp.Activity;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class myActivity_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			"", true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write('\r');
      out.write('\n');

    String appPath=request.getContextPath();
    String ticketId = (String)request.getAttribute("ticketId");

      out.write('\r');
      out.write('\n');
      out.write('\r');
      out.write('\n');
      org.apache.jasper.runtime.JspRuntimeLibrary.include(request, response, "/common/webCommon/user_top.jsp" + "?" + org.apache.jasper.runtime.JspRuntimeLibrary.URLEncode("title", request.getCharacterEncoding())+ "=" + org.apache.jasper.runtime.JspRuntimeLibrary.URLEncode("我的活动", request.getCharacterEncoding()), out, true);
      out.write('\r');
      out.write('\n');
      org.apache.jasper.runtime.JspRuntimeLibrary.include(request, response, "/common/webCommon/wasteCircleMenu.jsp" + "?" + org.apache.jasper.runtime.JspRuntimeLibrary.URLEncode("menuId", request.getCharacterEncoding())+ "=" + org.apache.jasper.runtime.JspRuntimeLibrary.URLEncode("#myActivity", request.getCharacterEncoding()), out, true);
      out.write("\r\n");
      out.write("<link rel=\"stylesheet\" href=\"");
      out.print(appPath);
      out.write("/main/common/elementui/index.css\">\r\n");
      out.write("<link rel=\"stylesheet\" href=\"");
      out.print(appPath);
      out.write("/css/wastecircle/publish.css\">\r\n");
      out.write("<link rel=\"stylesheet\" href=\"");
      out.print(appPath);
      out.write("/css/myBusiness/business.css\">\r\n");
      out.write("<link rel=\"stylesheet\" href=\"");
      out.print(appPath);
      out.write("/css/myBusiness/sign.css\">\r\n");
      out.write("<link rel=\"stylesheet\" href=\"");
      out.print(appPath);
      out.write("/main/pc/css/money-dialog.css?1\">\r\n");
      out.write("<link rel=\"stylesheet\" href=\"");
      out.print(appPath);
      out.write("/thirdparty/datetimepicker/css/bootstrap-datetimepicker.min.css\"/>\r\n");
      out.write("<script type=\"text/javascript\" src=\"");
      out.print(appPath);
      out.write("/thirdparty/datetimepicker/js/bootstrap-datetimepicker.js\"></script>\r\n");
      out.write("<script type=\"text/javascript\" src=\"");
      out.print(appPath);
      out.write("/thirdparty/datetimepicker/js/locales/bootstrap-datetimepicker.zh-CN.js\"></script>\r\n");
      out.write("<section id=\"app\">\r\n");
      out.write("    <template>\r\n");
      out.write("    <el-breadcrumb separator=\"/\">\r\n");
      out.write("        <el-breadcrumb-item>我的易废圈</el-breadcrumb-item>\r\n");
      out.write("        <el-breadcrumb-item onclick=\"vue.detailShow=false\">我的活动</el-breadcrumb-item>\r\n");
      out.write("        <el-breadcrumb-item v-if=\"detailShow\">{{list[index]['activityName']}}-活动申请单</el-breadcrumb-item>\r\n");
      out.write("    </el-breadcrumb>\r\n");
      out.write("    <div class=\"\">\r\n");
      out.write("        <div>\r\n");
      out.write("                <div class=\"publish_container\" v-show=\"!detailShow\">\r\n");
      out.write("                    <el-row style=\"margin-bottom: 10px\" class=\"searchDiv\">\r\n");
      out.write("                        <el-col :span=\"12\">\r\n");
      out.write("                            <b>活动状态：</b>\r\n");
      out.write("                            <el-button type=\"text\" :class=\"{'select':orderStatus==''}\" @click=\"queryStatus('')\">全部</el-button>\r\n");
      out.write("                            <el-button type=\"text\" :class=\"{'select':orderStatus=='1'}\" @click=\"queryStatus('1')\">未开始</el-button>\r\n");
      out.write("                            <el-button type=\"text\" :class=\"{'select':orderStatus=='2'}\" @click=\"queryStatus('2')\">进行中</el-button>\r\n");
      out.write("                            <el-button type=\"text\" :class=\"{'select':orderStatus=='3'}\" @click=\"queryStatus('3')\">已结束</el-button>\r\n");
      out.write("                        </el-col>\r\n");
      out.write("                        <el-col :span=\"12\" align=\"right\">\r\n");
      out.write("                            <el-button type=\"primary\" size=\"small\" icon=\"el-icon-plus\" @click=\"add\">创建活动</el-button>\r\n");
      out.write("                        </el-col>\r\n");
      out.write("                    </el-row>\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                            ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    <div class=\"panel panel-body\" v-for=\"(item,index) in list\">\r\n");
      out.write("                        <div class=\"item_message\">\r\n");
      out.write("                            <el-row :gutter=\"10\" style=\"margin-bottom: 12px\">\r\n");
      out.write("                                <el-col :xs=\"12\" :sm=\"12\" :md=\"12\" :lg=\"12\">\r\n");
      out.write("                                    <span class=\"status\" :class=\"ACTIVITYSTATUS[item.status-1]&&ACTIVITYSTATUS[item.status-1]['code']\" style=\"padding: 0 10px\">{{ACTIVITYSTATUS[item.status-1]['value']}}</span>\r\n");
      out.write("                                    <b style=\"margin-left:8px\">活动标题：</b><span>{{item.activityName}}</span>\r\n");
      out.write("                                </el-col>\r\n");
      out.write("                                <el-col :xs=\"12\" :sm=\"12\" :md=\"12\" :lg=\"12\" align=\"right\" style=\"font-size:12px\">\r\n");
      out.write("                                    <b>活动时间：</b><span>{{formatDate(item.startDate,'yyyy/MM/dd')}}-{{formatDate(item.endDate,'yyyy/MM/dd')}}</span>\r\n");
      out.write("                                </el-col>\r\n");
      out.write("                            </el-row>\r\n");
      out.write("                            <table style=\"width: 100%\">\r\n");
      out.write("                                <tr>\r\n");
      out.write("                                    <td style=\"width: 35%\"><b>申请量：</b><font>{{item.applyAmount||0}}吨</font></td>\r\n");
      out.write("                                    <td style=\"width: 50%\">\r\n");
      out.write("                                        <b>申请数：</b><font>{{item.applyEntCount||0}}家</font>\r\n");
      out.write("                                        <span v-for=\"(releaseStatus,i) in item.releaseStatusList\">\r\n");
      out.write("                                            <b>{{INQUIRYSTATUS[releaseStatus.status]}}：</b><font>{{releaseStatus.count||0}}</font>\r\n");
      out.write("                                        </span>\r\n");
      out.write("                                    </td>\r\n");
      out.write("                                    <td rowspan=\"2\" style=\"width: 15%;text-align: center;padding: 8px 0;line-height: 20px\">\r\n");
      out.write("                                        <span v-if=\"ACTIVITYSTATUS[item.status]&&ACTIVITYSTATUS[item.status]['code']=='DRAFT'\" class=\"noSubmit\">暂无申请</span>\r\n");
      out.write("                                        <el-button v-else type=\"text\" @click=\"inquiryDetail(index)\">查看详情</el-button><br/>\r\n");
      out.write("                                        <el-button type=\"text\" v-if=\"ACTIVITYSTATUS[item.status-1]['code']=='DRAFT'\" @click=\"edit(item.activityId)\">编辑</el-button>\r\n");
      out.write("                                        <el-button type=\"text\" v-if=\"ACTIVITYSTATUS[item.status-1]['code']=='SUBMIT'\" @click=\"pause(item,index)\" style=\"margin-left: 0\">停止</el-button>\r\n");
      out.write("                                    </td>\r\n");
      out.write("                                </tr>\r\n");
      out.write("                                <tr>\r\n");
      out.write("                                    <td style=\"width: 35%\"><b>成交量：</b><font>{{item.volumeAmount||0}}吨</font></td>\r\n");
      out.write("                                    <td style=\"width: 50%\"><b>成交数：</b><font>{{item.approveEntCount||0}}家</font></td>\r\n");
      out.write("                                </tr>\r\n");
      out.write("                            </table>\r\n");
      out.write("                            <el-row :gutter=\"10\" style=\"line-height: 42px;margin-top: 7px\" v-if=\"item.payStatus\">\r\n");
      out.write("                                <el-col :xs=\"20\" :sm=\"20\" :md=\"20\" :lg=\"20\">\r\n");
      out.write("                                    <b>覆盖产废企业数：</b><span>{{item.coverEntCount}}家</span>\r\n");
      out.write("                                    <b style=\"margin-left:15px\">需消费易废币：</b><span style=\"color: #f05050\">{{item.bitCion}}个</span>\r\n");
      out.write("                                    <el-tooltip class=\"item\" effect=\"dark\" :content=\"'5000（基础服务费）+'+Math.floor(item.coverEntCount*0.5)+'（运营费）'\" placement=\"top-start\">\r\n");
      out.write("                                        <el-button type=\"text\" style=\"width: 29px;color: #6a7580;font-size: 16px;padding: 0 2px;position: relative;top:0.49px;\" icon=\"el-icon-question\"></el-button>\r\n");
      out.write("                                    </el-tooltip>\r\n");
      out.write("                                </el-col>\r\n");
      out.write("                                <el-col :xs=\"4\" :sm=\"4\" :md=\"4\" :lg=\"4\" align=\"right\" style=\"font-size:12px\">\r\n");
      out.write("                                    <el-tag type=\"success\" v-if=\"item.payStatus=='PAYMENT'\">支付成功</el-tag>\r\n");
      out.write("                                    <el-button type=\"primary\" v-else size=\"small\" @click=\"checkEntAccount(item,index)\">确认支付</el-button>\r\n");
      out.write("                                </el-col>\r\n");
      out.write("                            </el-row>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                    <div v-show=\"!list||list.length==0&&!listLoading\" style=\"padding: 20px;text-align: center\"><span>暂无相关数据</span></div>\r\n");
      out.write("                    <div class=\"loading\" v-show=\"listLoading\"><img src=\"");
      out.print(appPath );
      out.write("/main/pc/img/load.gif\"></div>\r\n");
      out.write("                    <div v-show=\"list&&list.length>0\" align=\"right\">\r\n");
      out.write("                        <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page.sync=\"pageIndex\" :page-sizes=\"[5,10,20,30,50]\" :page-size=\"pageSize\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\r\n");
      out.write("                        </el-pagination>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("                <div class=\"inquiry_list\" v-show=\"detailShow\" v-if=\"list.length>0&&list[index]\">\r\n");
      out.write("                    <div class=\"searchDiv\">\r\n");
      out.write("                        <b>状态：</b>\r\n");
      out.write("                        <el-button type=\"text\" :class=\"{'select':actionStatus==''}\" @click=\"queryActionStaus('')\">全部</el-button>\r\n");
      out.write("                        <el-button type=\"text\" :class=\"{'select':actionStatus=='RELEASED'}\" @click=\"queryActionStaus('RELEASED')\">待处理({{statusCount.RELEASED}})</el-button>\r\n");
      out.write("                        <el-button type=\"text\" :class=\"{'select':actionStatus=='REFUSED'}\" @click=\"queryActionStaus('REFUSED')\">谢绝({{statusCount.REFUSED}})</el-button>\r\n");
      out.write("                        <el-button type=\"text\" :class=\"{'select':actionStatus=='SUBMIT'}\" @click=\"queryActionStaus('SUBMIT')\">询价中({{statusCount.SUBMIT}})</el-button>\r\n");
      out.write("                        <el-button type=\"text\" :class=\"{'select':actionStatus=='DONE'}\" @click=\"queryActionStaus('DONE')\">成交({{statusCount.DONE}})</el-button>\r\n");
      out.write("                    </div>\r\n");
      out.write("                    <div v-if=\"inquiryList.length>0\" style=\"margin: -9px 0 0;\">\r\n");
      out.write("                        <div class=\"buy_item panel panel-body\" v-for=\"(item,index) in inquiryList\">\r\n");
      out.write("                            <el-row :gutter=\"10\" style=\"margin-bottom:10px\">\r\n");
      out.write("                                <el-col :xs=\"17\" :sm=\"17\" :md=\"17\" :lg=\"17\">\r\n");
      out.write("                                    <b>产废单位：</b><em style=\"margin-right: 4px\">{{item.entName}}</em></a>\r\n");
      out.write("                                    <a class=\"qipao_logo\" href=\"javascript:\" @click=\"contact(item.releaseEntId,item.entName)\" title=\"联系TA\" style=\"margin-right: 14px;\">\r\n");
      out.write("                                        <img src=\"../main/pc/img/qipao.jpg\"></a>\r\n");
      out.write("                                    <b v-if=\"item.entAddress\"><i class=\"publisharea\"></i></b><em>{{item.entAddress}}</em>\r\n");
      out.write("                                    <span class=\"status\" v-if=\"INQUIRYSTATUS[item.releaseStatus]&&item.releaseStatus!='SUBMIT'&&item.releaseStatus!='RELEASED'\" :class=\"item.releaseStatus\" style=\"padding: 0 10px;\">{{INQUIRYSTATUS[item.releaseStatus]}}</span>\r\n");
      out.write("                                    <span class=\"status\" V-else-if=\"item.releaseStatus=='SUBMIT'\" :class=\"item.releaseStatus\" title=\"查看询价\" style=\"padding: 0 10px;cursor:pointer;\" @click=\"goMyInquiry\">{{INQUIRYSTATUS[item.releaseStatus]}}</span>\r\n");
      out.write("                                </el-col>\r\n");
      out.write("                                <el-col :xs=\"7\" :sm=\"7\" :md=\"7\" :lg=\"7\" align=\"right\" style=\"font-size:12px;color: #6a7580;\">\r\n");
      out.write("                                    <b>{{formatDate(item.releaseDate,'yyyy-MM-dd HH:mm')}}</b>\r\n");
      out.write("                                </el-col>\r\n");
      out.write("                            </el-row>\r\n");
      out.write("                            <el-row :gutter=\"10\" style=\"margin-bottom:10px\" class=\"total\">\r\n");
      out.write("                                <el-col>\r\n");
      out.write("                                    <b>总计：</b><em><font>{{item.totalWasteCount}}</font>种危废,累计<font>{{item.totalWasteAmountDesc}}</font></em>\r\n");
      out.write("                                </el-col>\r\n");
      out.write("                            </el-row>\r\n");
      out.write("                            <div class=\"itemReleaseList\">\r\n");
      out.write("                                <div class=\"itemRelease\" v-for=\"(item1,i) in item.releaseWasteDetails\">\r\n");
      out.write("                                    <span> {{item1.wasteName}}</span><span>{{item1.wasteCode}}</span><span>{{item1.wasteAmount}}{{item1.unitValue}}</span>\r\n");
      out.write("                                </div>\r\n");
      out.write("                            </div>\r\n");
      out.write("                            <el-row :gutter=\"10\" style=\"margin-top:10px\" v-if=\"item.releaseRemark\">\r\n");
      out.write("                                <el-col :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"24\"><b>备注：</b><em>{{item.releaseRemark||'--'}}</em></el-col>\r\n");
      out.write("                            </el-row>\r\n");
      out.write("                            <div style=\"margin-top: 9px;text-align: right\">\r\n");
      out.write("                                <el-tag v-if=\"item.tagInfo.tagStatus\" style=\"margin-right: 20px\">{{item.tagInfo.tagStatus}}</el-tag>\r\n");
      out.write("                                <el-button type=\"text\" class=\"signBtn\" @click=\"getSign(item,index)\"><i class=\"signIcon\"></i>标记({{item.tagInfo?item.tagInfo.count:0}})<i class=\"el-icon-arrow-right\"></i></el-button>\r\n");
      out.write("                                <el-button style=\"background-color: #ebecf0\"  @click=\"reject(item.releaseId)\"  v-if=\"item.releaseStatus=='RELEASED'\">谢绝</el-button>\r\n");
      out.write("                                <el-button type=\"primary\" @click=\"buy(item.releaseId)\"  v-if=\"item.releaseStatus=='RELEASED'\" class=\"over\">询价</el-button>\r\n");
      out.write("                            </div>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <div v-show=\"inquiryList&&inquiryList.length>0\" align=\"right\">\r\n");
      out.write("                            <el-pagination @size-change=\"handleSizeChange_inquiry\" @current-change=\"handleCurrentChange_inquiry\" :current-page.sync=\"inquiryIndex\" :page-sizes=\"[5,10,20,30,50]\" :page-size=\"inquirySize\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"inquiryTotal\">\r\n");
      out.write("                            </el-pagination>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                    <div style=\"padding: 50px 0;text-align: center\" v-show=\"!inquiryList||inquiryList.length==0\">\r\n");
      out.write("                        暂无相关数据\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("\r\n");
      out.write("        </div>\r\n");
      out.write("    </div>\r\n");
      out.write("        <el-dialog\r\n");
      out.write("                class=\"signDialog animated bounceInRight\"\r\n");
      out.write("                :visible.sync=\"signDialogVisible\"\r\n");
      out.write("                :modal-append-to-body=\"false\"\r\n");
      out.write("                :modal=\"false\"\r\n");
      out.write("                :before-close=\"closeSignDialog\"\r\n");
      out.write("                width=\"320px\">\r\n");
      out.write("            <span slot=\"title\" class=\"title\">标记</span>\r\n");
      out.write("            <div class=\"entInfo\">\r\n");
      out.write("                <p><em>单位：</em><b>{{signItem.entName}}</b></p>\r\n");
      out.write("                <p><em>总数：</em><b><font color=\"#1171d1\">{{signItem.totalWasteAmountDesc}}</font></b></p>\r\n");
      out.write("            </div>\r\n");
      out.write("            <div class=\"editArea\">\r\n");
      out.write("                <el-button-group>\r\n");
      out.write("                    <el-select v-model=\"signType\" placeholder=\"请选择标记类型\" style=\"float: left\">\r\n");
      out.write("                        <el-option\r\n");
      out.write("                                v-for=\"item in signTypeList\"\r\n");
      out.write("                                :key=\"item.code\"\r\n");
      out.write("                                :label=\"item.value\"\r\n");
      out.write("                                :value=\"item.code\">\r\n");
      out.write("                        </el-option>\r\n");
      out.write("                    </el-select>\r\n");
      out.write("                    <el-button type=\"primary\" @click=\"showSignForm\">新增标记</el-button>\r\n");
      out.write("                </el-button-group>\r\n");
      out.write("                <div class=\"sign_form\" v-if=\"signFormShow\">\r\n");
      out.write("                    <div class=\"sign_form_title\">添加{{SIGNTYPE[signType]}}标记</div>\r\n");
      out.write("                    <div class=\"sign_form_content\">\r\n");
      out.write("                        <el-input v-if=\"signType=='TAGING'\"\r\n");
      out.write("                                  type=\"textarea\"\r\n");
      out.write("                                  :rows=\"2\"\r\n");
      out.write("                                  placeholder=\"说点什么吧\"\r\n");
      out.write("                                  v-model=\"say\">\r\n");
      out.write("                        </el-input>\r\n");
      out.write("                        <div v-if=\"signType=='SAMPLING'\" align=\"center\">\r\n");
      out.write("                            <el-date-picker\r\n");
      out.write("                                    v-model=\"sampleDate\"\r\n");
      out.write("                                    type=\"date\"\r\n");
      out.write("                                    align=\"right\"\r\n");
      out.write("                                    placeholder=\"请选择取样时间\">\r\n");
      out.write("                            </el-date-picker>\r\n");
      out.write("                            <el-input v-model=\"sampleName\" placeholder=\"请输入联系人姓名\"></el-input>\r\n");
      out.write("                            <el-input v-model=\"sampleMobile\" placeholder=\"请输入联系人电话\"></el-input>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <div v-if=\"signType=='SAMPLE'\">\r\n");
      out.write("                            <el-radio-group v-model=\"sampleStatus\">\r\n");
      out.write("                                <el-radio label=\"SAMPLED\">已取样</el-radio>\r\n");
      out.write("                                <el-radio label=\"DELIVERED_LAB\">已送实验室</el-radio><br/>\r\n");
      out.write("                                <el-radio label=\"QUALIFIED\" style=\"margin-top: 10px\">合格</el-radio>\r\n");
      out.write("                                <el-radio label=\"UNQUALIFIED\" style=\"margin-top: 10px;margin-left: 44px\">不合格</el-radio>\r\n");
      out.write("                            </el-radio-group>\r\n");
      out.write("                            <el-input type=\"textarea\" style=\"margin-top: 10px\"\r\n");
      out.write("                                      :rows=\"2\"\r\n");
      out.write("                                      placeholder=\"备注\"\r\n");
      out.write("                                      v-model=\"sampleRemark\">\r\n");
      out.write("                            </el-input>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <el-radio-group v-model=\"contractStatus\" v-if=\"signType=='CONTRACT'\">\r\n");
      out.write("                            <el-radio label=\"DRAFTCONTRACT\">合同已拟定</el-radio>\r\n");
      out.write("                            <el-radio label=\"DELIVERYCONTRACT\">合同已寄出</el-radio><br/>\r\n");
      out.write("                            <el-radio label=\"SIGNCONTRACT\" style=\"margin-top: 10px\">合同已签定</el-radio>\r\n");
      out.write("                        </el-radio-group>\r\n");
      out.write("                        <el-input v-if=\"signType=='PRICE'\"\r\n");
      out.write("                                  type=\"textarea\"\r\n");
      out.write("                                  :rows=\"2\"\r\n");
      out.write("                                  placeholder=\"备注\"\r\n");
      out.write("                                  v-model=\"priceRemark\">\r\n");
      out.write("                        </el-input>\r\n");
      out.write("                    </div>\r\n");
      out.write("                    <div class=\"sign_form_btn\">\r\n");
      out.write("                        <el-button type=\"primary\" size=\"small\" style=\"height: 30px\" @click=\"saveSign\">保存</el-button>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("            <div class=\"signTimeLine\" v-loading=\"signDialogloading\"\r\n");
      out.write("                 element-loading-spinner=\"el-icon-loading\"\r\n");
      out.write("                 element-loading-background=\"rgba(246, 247, 251, 0.8)\">\r\n");
      out.write("                <el-steps direction=\"vertical\" :active=\"1\" v-if=\"signList.length>0\">\r\n");
      out.write("                    <el-step v-for=\"(item,index) in signList\">\r\n");
      out.write("                        <div slot=\"title\" class=\"signTitle\">\r\n");
      out.write("                            <span class=\"signTime\">{{item.createTime.substring(0,16)}}</span>\r\n");
      out.write("                            <span class=\"signCreate\">{{item.createBy}}</span>\r\n");
      out.write("                            <el-button type=\"text\" class=\"el-icon-delete\" title=\"删除该标记\" @click=\"delSign(item.id)\"></el-button>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <div slot=\"description\" class=\"signContent\" v-if=\"item.tagType=='TAGING'\">\r\n");
      out.write("                            {{item.comments}}\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <div slot=\"description\" class=\"signContent\" v-if=\"item.tagType=='SAMPLING'\">\r\n");
      out.write("                            取样时间：{{item.sampleDate?item.sampleDate.substring(0,10):''}}<br/>\r\n");
      out.write("                            联系人：{{item.contacts}}<br/>\r\n");
      out.write("                            联系电话：{{item.contactsTel}}\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <div slot=\"description\" class=\"signContent\" v-if=\"item.tagType=='SAMPLE'\">\r\n");
      out.write("                            <div v-if=\"item.comments&&item.comments.split('#').length>1\">\r\n");
      out.write("                                <div>{{item.comments.split('#')[0]}}</div>\r\n");
      out.write("                                <div><span style=\"font-size: 12px;color: #6b7580;\">备注：</span>{{item.comments.split('#')[1]}}</div>\r\n");
      out.write("                            </div>\r\n");
      out.write("                            <span v-else>{{item.comments}}</span>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <div slot=\"description\" class=\"signContent\" v-if=\"item.tagType=='CONTRACT'\">\r\n");
      out.write("                            {{TAGSTATUS[item.busiStatus]}}\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <div slot=\"description\" class=\"signContent\" v-if=\"item.tagType=='TERMINATE'\">\r\n");
      out.write("                            {{TAGSTATUS[item.tagType]}}\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <div slot=\"description\" class=\"signContent\" v-if=\"item.tagType=='PRICE'\">\r\n");
      out.write("                            <div v-if=\"item.comments&&item.comments.split('#').length>1\">\r\n");
      out.write("                                <div>{{item.comments.split('#')[0]}}</div>\r\n");
      out.write("                                <div><span style=\"font-size: 12px;color: #6b7580;\">备注：</span>{{item.comments.split('#')[1]}}</div>\r\n");
      out.write("                            </div>\r\n");
      out.write("                            <span v-else>{{item.comments}}</span>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </el-step>\r\n");
      out.write("                </el-steps>\r\n");
      out.write("                <span v-else style=\"display: inline-block;text-align: center;width: 100%;\">暂无标记信息</span>\r\n");
      out.write("            </div>\r\n");
      out.write("        </el-dialog>\r\n");
      out.write("        <el-dialog\r\n");
      out.write("                class=\"money-dialog\"\r\n");
      out.write("                title=\"\"\r\n");
      out.write("                :visible.sync=\"moneyShow\"\r\n");
      out.write("                center>\r\n");
      out.write("            <div class=\"money-dialog-bg\">\r\n");
      out.write("                <div class=\"money-text1\" v-if=\"paySuccess\"><i class=\"yinhao\"></i><span style=\"color: #7b3e04;font-weight: bold;\">支付成功！</span><i class=\"yinhao\"></i></div>\r\n");
      out.write("                <div class=\"money-text1\" v-else><i class=\"yinhao\"></i>您需要花费<b>{{consumeAmount}}个</b>易废币<i class=\"yinhao\"></i></div>\r\n");
      out.write("                <div class=\"money-text2\"  v-if=\"paySuccess\">您现在可以联系易废网管理人员来开启该活动了。</div>\r\n");
      out.write("                <div class=\"money-text2\" v-else>来开启该活动。</div>\r\n");
      out.write("                <div class=\"money-text3\">当前账户余额：<b>{{myBitAmount}}</b>个易废币</div>\r\n");
      out.write("                <div class=\"money-btn-div\">\r\n");
      out.write("                    <el-button class=\"confirm-btn\" v-if=\"myBitAmount>=consumeAmount&&!paySuccess\" @click=\"confirmPay()\">确定支付</el-button>\r\n");
      out.write("                    <el-button class=\"confirm-btn\" v-if=\"myBitAmount<consumeAmount&&!paySuccess\" @click=\"recharge()\">立即充值</el-button>\r\n");
      out.write("                    <el-button class=\"recharge-btn\" v-if=\"paySuccess\" @click=\"recharge()\">立即查看</el-button>\r\n");
      out.write("                    <el-button class=\"cancel-btn\" type=\"text\" @click=\"moneyShow = false\">取 消</el-button>\r\n");
      out.write("                </div>\r\n");
      out.write("                <div class=\"money-time-tip\" v-if=\"paySuccess\">{{remainTime}}秒后自动关闭</div>\r\n");
      out.write("            </div>\r\n");
      out.write("        </el-dialog>\r\n");
      out.write("    </template>\r\n");
      out.write("</section>\r\n");
      out.write("<!-- 先引入 Vue -->\r\n");
      out.write("<script src=\"");
      out.print(appPath);
      out.write("/main/common/elementui/vue.min.js\"></script>\r\n");
      out.write("<!-- 引入组件库 -->\r\n");
      out.write("<script src=\"");
      out.print(appPath);
      out.write("/main/common/elementui/index.js\"></script>\r\n");
      out.write("<script src=\"");
      out.print(appPath );
      out.write("/app/js/constants.js\"></script>\r\n");
      out.write("<script src=\"");
      out.print(appPath );
      out.write("/thirdparty/la-number/la-number.js\"></script>\r\n");
      out.write("<script>\r\n");
      out.write("    var vue=new Vue({\r\n");
      out.write("        el: '#app',\r\n");
      out.write("        data: {\r\n");
      out.write("            pageIndex:1,\r\n");
      out.write("            pageSize:5,\r\n");
      out.write("            list:[],\r\n");
      out.write("            listLoading:true,\r\n");
      out.write("            total:0,\r\n");
      out.write("            index:0,\r\n");
      out.write("            inquiryList:[],\r\n");
      out.write("            inquiryIndex:1,\r\n");
      out.write("            inquirySize:5,\r\n");
      out.write("            inquiryTotal:0,\r\n");
      out.write("            inquiryLoading:false,\r\n");
      out.write("            detailShow:false,\r\n");
      out.write("            statusClass:statusClass,\r\n");
      out.write("            ACTIVITYSTATUS:ACTIVITYSTATUS,\r\n");
      out.write("            INQUIRYSTATUS:INQUIRYSTATUS,\r\n");
      out.write("            orderStatus:'',\r\n");
      out.write("            dateType:'',\r\n");
      out.write("            actionStatus:'RELEASED',\r\n");
      out.write("            statusCount:{'DONE':0,'REFUSED':0,'RELEASED':0,'SUBMIT':0},\r\n");
      out.write("            signDialogVisible:false,\r\n");
      out.write("            signDialogloading:false,\r\n");
      out.write("            signType:'',\r\n");
      out.write("            signTypeList:[],\r\n");
      out.write("            SIGNTYPE:SIGNTYPE,\r\n");
      out.write("            say:'',\r\n");
      out.write("            sampleDate:'',\r\n");
      out.write("            sampleName:'',\r\n");
      out.write("            sampleMobile:'',\r\n");
      out.write("            sampleStatus:'DELIVERED_LAB',\r\n");
      out.write("            signFormShow:false,\r\n");
      out.write("            signItem:{},\r\n");
      out.write("            signList:[],\r\n");
      out.write("            contractStatus:'DRAFTCONTRACT',\r\n");
      out.write("            TAGSTATUS:TAGSTATUS,\r\n");
      out.write("            moneyShow:false,\r\n");
      out.write("            paySuccess:false,\r\n");
      out.write("            remainTime:3,\r\n");
      out.write("            myBitAmount:0,\r\n");
      out.write("            consumeAmount:0,\r\n");
      out.write("            currentActivityId:'',\r\n");
      out.write("            currentActivityIndex:0,\r\n");
      out.write("            binding:0,\r\n");
      out.write("            priceRemark:''\r\n");
      out.write("        },\r\n");
      out.write("        created:function() {\r\n");
      out.write("            this.getList();\r\n");
      out.write("        },\r\n");
      out.write("        methods: {\r\n");
      out.write("            getList: function () {\r\n");
      out.write("                this.list=[];\r\n");
      out.write("                var _this = this;\r\n");
      out.write("                var param = this.getParamInfo();\r\n");
      out.write("                ajax({\r\n");
      out.write("                    url: '/wasteActivity/listAcitivityByEnterId.htm?ticketId=' + getParam('ticketId') + '&pageIndex=' + (this.pageIndex) + '&pageSize=' + this.pageSize,\r\n");
      out.write("                    dataType: 'json',\r\n");
      out.write("                    contentType: 'application/json',\r\n");
      out.write("                    data: JSON.stringify(param),\r\n");
      out.write("                    success: function (result) {\r\n");
      out.write("                        console.log(result);\r\n");
      out.write("                        _this.listLoading = false;\r\n");
      out.write("                        if (result.status == 1 && result.data.list) {\r\n");
      out.write("                            _this.list=result.data.list;\r\n");
      out.write("                            _this.total=result.data.paging.totalRecord;\r\n");
      out.write("                            var activityId=getParam('activityId');\r\n");
      out.write("                            if(!activityId){\r\n");
      out.write("                                return;\r\n");
      out.write("                            }\r\n");
      out.write("                            for(var i in result.data.list){\r\n");
      out.write("                                if(result.data.list[i]['activityId']==activityId){\r\n");
      out.write("                                    vue.inquiryDetail(i);\r\n");
      out.write("                                    return;\r\n");
      out.write("                                }\r\n");
      out.write("                            }\r\n");
      out.write("                        }\r\n");
      out.write("                    }\r\n");
      out.write("                })\r\n");
      out.write("            },\r\n");
      out.write("            getInquiryList: function () {\r\n");
      out.write("                this.inquiryList=[];\r\n");
      out.write("                var _this = this;\r\n");
      out.write("                var param = {\r\n");
      out.write("                    activityId:this.list[this.index]['activityId'],\r\n");
      out.write("                    status:this.actionStatus\r\n");
      out.write("                };\r\n");
      out.write("                ajax({\r\n");
      out.write("                    url: '/entRelease/listWasteEntReleaseByActivityId.htm?ticketId=");
      out.print(ticketId);
      out.write("&pageIndex='+this.inquiryIndex+'&pageSize='+this.inquirySize,\r\n");
      out.write("                    dataType: 'json',\r\n");
      out.write("                    data:JSON.stringify(param),\r\n");
      out.write("                    contentType: 'application/json',\r\n");
      out.write("                    success: function (result) {\r\n");
      out.write("                        console.log(result);\r\n");
      out.write("                        _this.inquiryLoading = false;\r\n");
      out.write("                        if (result.status == 1 && result.data.activityList) {\r\n");
      out.write("                            _this.inquiryList=result.data.activityList;\r\n");
      out.write("                            _this.inquiryTotal=result.data.paging.totalRecord;\r\n");
      out.write("                        } else {\r\n");
      out.write("\r\n");
      out.write("                        }\r\n");
      out.write("                    }\r\n");
      out.write("                })\r\n");
      out.write("            },\r\n");
      out.write("            getActivityStatusCount:function () {\r\n");
      out.write("                var activityId=this.list[this.index]['activityId'];\r\n");
      out.write("                ajax({\r\n");
      out.write("                    url:'/entRelease/countActivityStatusByActivityId',\r\n");
      out.write("                    data:{\r\n");
      out.write("                        activityId:activityId\r\n");
      out.write("                    },\r\n");
      out.write("                    success:function (result) {\r\n");
      out.write("                        console.log(result);\r\n");
      out.write("                        if(result.status){\r\n");
      out.write("                            for(var i in result.data){\r\n");
      out.write("                                Vue.set(vue.statusCount,result.data[i]['status'],result.data[i]['count']);\r\n");
      out.write("                            }\r\n");
      out.write("                        }\r\n");
      out.write("                    }\r\n");
      out.write("                });\r\n");
      out.write("            },\r\n");
      out.write("            search:function () {\r\n");
      out.write("                this.pageIndex=1;\r\n");
      out.write("                this.list=[];\r\n");
      out.write("                this.getList();\r\n");
      out.write("            },\r\n");
      out.write("            getParamInfo:function () {\r\n");
      out.write("                var startDate=$('#start_date').val();\r\n");
      out.write("                startDate=startDate?(startDate+' 00:00:00'):'';\r\n");
      out.write("                var endDate=$('#end_date').val();\r\n");
      out.write("                endDate=endDate?(endDate+' 23:59:59'):'';\r\n");
      out.write("                var param={\r\n");
      out.write("                    status:this.orderStatus,\r\n");
      out.write("                    dateType: this.dateType,\r\n");
      out.write("                    startDate:startDate,\r\n");
      out.write("                    endDate:endDate\r\n");
      out.write("                };\r\n");
      out.write("                return param;\r\n");
      out.write("            },\r\n");
      out.write("            queryStatus:function (status) {\r\n");
      out.write("                this.orderStatus=status;\r\n");
      out.write("                this.search();\r\n");
      out.write("            },\r\n");
      out.write("            queryActionStaus:function (status) {\r\n");
      out.write("                this.actionStatus=status;\r\n");
      out.write("                this.getInquiryList();\r\n");
      out.write("            },\r\n");
      out.write("            queryDateType:function (dateType) {\r\n");
      out.write("                this.dateType=dateType;\r\n");
      out.write("                $('#start_date').val('');\r\n");
      out.write("                $('#end_date').val('');\r\n");
      out.write("                this.search();\r\n");
      out.write("            },\r\n");
      out.write("            handleSizeChange:function(val) {\r\n");
      out.write("                this.pageIndex=1;\r\n");
      out.write("                this.pageSize = val;\r\n");
      out.write("                this.getList()\r\n");
      out.write("            },\r\n");
      out.write("            handleCurrentChange:function(val) {\r\n");
      out.write("                this.pageIndex = val;\r\n");
      out.write("                this.getList()\r\n");
      out.write("            },\r\n");
      out.write("            handleSizeChange_inquiry:function(val) {\r\n");
      out.write("                this.inquiryIndex=1;\r\n");
      out.write("                this.inquirySize = val;\r\n");
      out.write("                this.getInquiryList();\r\n");
      out.write("            },\r\n");
      out.write("            handleCurrentChange_inquiry:function(val) {\r\n");
      out.write("                this.inquiryIndex = val;\r\n");
      out.write("                this.getInquiryList();\r\n");
      out.write("            },\r\n");
      out.write("            inquiryDetail:function (index) {\r\n");
      out.write("                this.index=index;\r\n");
      out.write("                this.detailShow=true;\r\n");
      out.write("                this.inquiryIndex=1;\r\n");
      out.write("                this.getInquiryList();\r\n");
      out.write("                Vue.set(vue.statusCount,'DONE',0);\r\n");
      out.write("                Vue.set(vue.statusCount,'REFUSED',0);\r\n");
      out.write("                Vue.set(vue.statusCount,'RELEASED',0);\r\n");
      out.write("                Vue.set(vue.statusCount,'SUBMIT',0);\r\n");
      out.write("                this.getActivityStatusCount();\r\n");
      out.write("            },\r\n");
      out.write("            goBack:function () {\r\n");
      out.write("                this.detailShow=false;\r\n");
      out.write("            },\r\n");
      out.write("            checkEntAccount:function (item,index) {\r\n");
      out.write("                this.currentActivityIndex=index;\r\n");
      out.write("                this.currentActivityId=item.activityId;\r\n");
      out.write("                this.consumeAmount=item.bitCion;\r\n");
      out.write("                vue.paySuccess=false;\r\n");
      out.write("                ajax({\r\n");
      out.write("                    url:'/entBitcionAccount/checkEntAccount.htm?ticketId=");
      out.print(ticketId);
      out.write("',\r\n");
      out.write("                    data:JSON.stringify({\r\n");
      out.write("                        consumeAmount:item.bitCion\r\n");
      out.write("                    }),\r\n");
      out.write("                    contentType:'application/json',\r\n");
      out.write("                    success:function (result) {\r\n");
      out.write("                        console.log(result);\r\n");
      out.write("                        if(result.status==1){\r\n");
      out.write("                            vue.myBitAmount=result.data.bitcion;\r\n");
      out.write("                            vue.moneyShow=true;\r\n");
      out.write("                        }\r\n");
      out.write("                    }\r\n");
      out.write("                });\r\n");
      out.write("            },\r\n");
      out.write("            confirmPay:function () {\r\n");
      out.write("                var item=vue.list[vue.currentActivityIndex];\r\n");
      out.write("                ajax({\r\n");
      out.write("                    url:'/entBindServe/saveBindServe.htm?ticketId=");
      out.print(ticketId);
      out.write("',\r\n");
      out.write("                    data:JSON.stringify({\r\n");
      out.write("                        consumeAmount:item.bitCion,\r\n");
      out.write("                        bindServiceId:this.currentActivityId,\r\n");
      out.write("                        serviceType:'ACTIVITY',\r\n");
      out.write("                        remark:'支付“'+item.activityName+'”的活动举办权'\r\n");
      out.write("                    }),\r\n");
      out.write("                    contentType:'application/json',\r\n");
      out.write("                    success:function (result) {\r\n");
      out.write("                        console.log(result);\r\n");
      out.write("                        if(result.status==1){\r\n");
      out.write("                            vue.paySuccess=true;\r\n");
      out.write("                            vue.remainTime=3;\r\n");
      out.write("                            vue.myBitAmount-=vue.consumeAmount;\r\n");
      out.write("                            item.payStatus='PAYMENT';\r\n");
      out.write("                            Vue.set(vue.list,vue.currentActivityIndex,item);\r\n");
      out.write("                            var timer=setInterval(function () {\r\n");
      out.write("                                vue.remainTime-=1;\r\n");
      out.write("                                if(vue.remainTime==0){\r\n");
      out.write("                                    clearInterval(timer);\r\n");
      out.write("                                    vue.moneyShow=false;\r\n");
      out.write("                                }\r\n");
      out.write("                            },1000);\r\n");
      out.write("                        }\r\n");
      out.write("                    }\r\n");
      out.write("                });\r\n");
      out.write("            },\r\n");
      out.write("            recharge:function () {\r\n");
      out.write("                window.location='");
      out.print(appPath);
      out.write("/personaluser/recharge.htm?ticketId=");
      out.print(ticketId);
      out.write("';\r\n");
      out.write("            },\r\n");
      out.write("            contact:function (entId,entName) {\r\n");
      out.write("                getEnterpriseContacts(entId,entName,'处置企业我的活动');\r\n");
      out.write("            },\r\n");
      out.write("            goMyInquiry:function () {\r\n");
      out.write("              window.location='");
      out.print(appPath);
      out.write("/entInquiry/list.htm?ticketId=");
      out.print(ticketId);
      out.write("';\r\n");
      out.write("            },\r\n");
      out.write("            add:function () {\r\n");
      out.write("                window.location='");
      out.print(appPath);
      out.write("/wasteActivity/addActivity.htm?ticketId=");
      out.print(ticketId);
      out.write("';\r\n");
      out.write("            },\r\n");
      out.write("            edit:function (activityId) {\r\n");
      out.write("                window.location='");
      out.print(appPath);
      out.write("/wasteActivity/addActivity.htm?ticketId=");
      out.print(ticketId);
      out.write("&activityId='+activityId;\r\n");
      out.write("            },\r\n");
      out.write("            pause:function (item,index) {\r\n");
      out.write("                vue.$confirm('此操作将停止该活动, 是否确定?', '提示', {\r\n");
      out.write("                    confirmButtonText: '确定',\r\n");
      out.write("                    cancelButtonText: '取消',\r\n");
      out.write("                    type: 'warning'\r\n");
      out.write("                }).then(function(){\r\n");
      out.write("                    var arr=[item.activityId];\r\n");
      out.write("                    ajax({\r\n");
      out.write("                        url:'/wasteActivity/stopActivity.htm',\r\n");
      out.write("                        data:{\r\n");
      out.write("                            ticketId:'");
      out.print(ticketId);
      out.write("',\r\n");
      out.write("                            ids:arr.toString(),\r\n");
      out.write("                            status:2\r\n");
      out.write("                        },\r\n");
      out.write("                        success:function (data) {\r\n");
      out.write("                            if(data.status==1){\r\n");
      out.write("                                $.notify(\"停止活动成功\", { status: 'success',timeout:1500 });\r\n");
      out.write("                                item.status=3;\r\n");
      out.write("                                Vue.set(vue.list,index,item);\r\n");
      out.write("                            }\r\n");
      out.write("                        }\r\n");
      out.write("                    });\r\n");
      out.write("                }).catch(function(){});\r\n");
      out.write("            },\r\n");
      out.write("            reject:function (releaseId) {\r\n");
      out.write("                console.log(releaseId);\r\n");
      out.write("                var param={\r\n");
      out.write("                    releaseId:releaseId\r\n");
      out.write("                };\r\n");
      out.write("                vue.$confirm('此操作将拒绝该申请单, 是否确定?', '提示', {\r\n");
      out.write("                    confirmButtonText: '确定',\r\n");
      out.write("                    cancelButtonText: '取消',\r\n");
      out.write("                    type: 'warning'\r\n");
      out.write("                }).then(function(){\r\n");
      out.write("                    ajax({\r\n");
      out.write("                        url:'/entRelease/refusedWasteEntApply.htm?ticketId=");
      out.print(ticketId);
      out.write("',\r\n");
      out.write("                        dataType: 'json',\r\n");
      out.write("                        contentType: 'application/json',\r\n");
      out.write("                        data:JSON.stringify(param),\r\n");
      out.write("                        success:function (data) {\r\n");
      out.write("                            if(data.status==1&&data.data==true){\r\n");
      out.write("                                $.notify('拒绝成功',{status:'success',timeout:2500});\r\n");
      out.write("                                vue.inquiryIndex=1;\r\n");
      out.write("                                vue.getInquiryList();\r\n");
      out.write("                                vue.getActivityStatusCount();\r\n");
      out.write("                            }\r\n");
      out.write("                        }\r\n");
      out.write("                    })\r\n");
      out.write("                }).catch(function(){});\r\n");
      out.write("            },\r\n");
      out.write("            entDetail:function (entId) {\r\n");
      out.write("                window.location = \"");
      out.print(appPath);
      out.write("/myenterprise/viewEnterpriseDetail.htm?ticketId=");
      out.print(ticketId);
      out.write("&onlyViewFlg=true&enterpriseId=\" + entId + \"&breadcrumbName=我的活动\";\r\n");
      out.write("            },\r\n");
      out.write("            buy:function (releaseId) {\r\n");
      out.write("                var src=appPath+'/entRelease/cfBuy.htm?ticketId='+getParam('ticketId')+'&releaseId='+releaseId+\"&activityId=\"+this.list[this.index]['activityId']+\"&breadcrumbName=我的活动\";\r\n");
      out.write("                window.location=src;\r\n");
      out.write("            },\r\n");
      out.write("            formatDate:function (dateStr,fmt) {\r\n");
      out.write("                try {\r\n");
      out.write("                    fmt=fmt||'yyyy-MM-dd HH:mm:ss';\r\n");
      out.write("                    var arr=dateStr.split(' ');\r\n");
      out.write("                    var arr1=arr[0].split('-');\r\n");
      out.write("                    var year=arr1[0];\r\n");
      out.write("                    var month=arr1[1]||'01';\r\n");
      out.write("                    var day=arr1[2]||'01';\r\n");
      out.write("                    fmt=fmt.replace(/yyyy/g,year);\r\n");
      out.write("                    fmt=fmt.replace(/MM/g,month);\r\n");
      out.write("                    fmt=fmt.replace(/dd/g,day);\r\n");
      out.write("                    if(arr.length>1){\r\n");
      out.write("                        var arr2=arr[1].split(':');\r\n");
      out.write("                        var hour=arr2[0]||'00';\r\n");
      out.write("                        var min=arr2[1]||'00';\r\n");
      out.write("                        var second=arr2[2]||'00';\r\n");
      out.write("                        fmt=fmt.replace(/HH/g,hour);\r\n");
      out.write("                        fmt=fmt.replace(/mm/g,min);\r\n");
      out.write("                        fmt=fmt.replace(/ss/g,second);\r\n");
      out.write("                    }else{\r\n");
      out.write("                        fmt=fmt.replace(/HH/g,'00');\r\n");
      out.write("                        fmt=fmt.replace(/mm/g,'00');\r\n");
      out.write("                        fmt=fmt.replace(/ss/g,'00');\r\n");
      out.write("                    }\r\n");
      out.write("                } catch(error) {\r\n");
      out.write("                    console.error(error);\r\n");
      out.write("                } finally {\r\n");
      out.write("                    return fmt;\r\n");
      out.write("                }\r\n");
      out.write("            },\r\n");
      out.write("            showSignForm:function () {\r\n");
      out.write("                if(this.signType==''){\r\n");
      out.write("                    $.notify('请选择标记类型',{status:'info',timeout:2500});\r\n");
      out.write("                    return;\r\n");
      out.write("                }\r\n");
      out.write("                this.signFormShow=true;\r\n");
      out.write("            },\r\n");
      out.write("            delSign:function (id) {\r\n");
      out.write("                ajax({\r\n");
      out.write("                    url:'/discussTag/deleteDiscussTag',\r\n");
      out.write("                    data:{\r\n");
      out.write("                        id:id\r\n");
      out.write("                    },\r\n");
      out.write("                    success:function (result) {\r\n");
      out.write("                        if(result.status&&result.data){\r\n");
      out.write("                            $.notify('删除标记成功',{status:'success',timeout:2500});\r\n");
      out.write("                            vue.getSignList();\r\n");
      out.write("                        }\r\n");
      out.write("                    }\r\n");
      out.write("                });\r\n");
      out.write("            },\r\n");
      out.write("            saveSign:function () {\r\n");
      out.write("//                        this.signFormShow=false;\r\n");
      out.write("                var param={\r\n");
      out.write("                    releaseId:this.signItem.releaseId,\r\n");
      out.write("                    tagType:this.signType\r\n");
      out.write("                };\r\n");
      out.write("                switch (this.signType){\r\n");
      out.write("                    case 'TAGING':\r\n");
      out.write("                        param.comments=this.say;\r\n");
      out.write("                        param.tagStatus='TAGGING';\r\n");
      out.write("                        break;\r\n");
      out.write("                    case 'SAMPLING':\r\n");
      out.write("                        param.sampleDate=this.sampleDate;\r\n");
      out.write("                        param.contacts=this.sampleName;\r\n");
      out.write("                        param.contactsTel=this.sampleMobile;\r\n");
      out.write("                        param.tagStatus='SAMPLING';\r\n");
      out.write("                        break;\r\n");
      out.write("                    case 'SAMPLE':\r\n");
      out.write("                        param.tagStatus=this.sampleStatus;\r\n");
      out.write("                        param.comments=this.TAGSTATUS[this.sampleStatus]+'#'+this.sampleRemark;\r\n");
      out.write("                        break;\r\n");
      out.write("                    case 'CONTRACT':\r\n");
      out.write("                        param.tagStatus=this.contractStatus;\r\n");
      out.write("                        break;\r\n");
      out.write("                    case 'TERMINATE':\r\n");
      out.write("                        param.tagStatus='TERMINATE';\r\n");
      out.write("                        break;\r\n");
      out.write("                    case 'PRICE':\r\n");
      out.write("                        param.tagStatus='PRICE';\r\n");
      out.write("                        param.comments='报价#'+this.priceRemark;\r\n");
      out.write("                        break;\r\n");
      out.write("                }\r\n");
      out.write("                ajax({\r\n");
      out.write("                    url:'/discussTag/saveDiscussTag.htm?ticketId=");
      out.print(ticketId);
      out.write("',\r\n");
      out.write("                    data:JSON.stringify(param),\r\n");
      out.write("                    contentType:'application/json',\r\n");
      out.write("                    success:function (result) {\r\n");
      out.write("                        if(result.status&&result.data){\r\n");
      out.write("                            $.notify('添加标记成功',{status:'success',timeout:2500});\r\n");
      out.write("                            vue.signFormShow=false;\r\n");
      out.write("                            vue.getSignList();\r\n");
      out.write("                        }\r\n");
      out.write("                    }\r\n");
      out.write("                });\r\n");
      out.write("            },\r\n");
      out.write("            getSignList:function () {\r\n");
      out.write("                vue.signList=[];\r\n");
      out.write("                this.signDialogloading=true;\r\n");
      out.write("                ajax({\r\n");
      out.write("                    url:'/discussTag/listDiscussTag',\r\n");
      out.write("                    data:{\r\n");
      out.write("                        releaseId:this.signItem.releaseId\r\n");
      out.write("                    },\r\n");
      out.write("                    success:function (result) {\r\n");
      out.write("                        vue.signDialogloading=false;\r\n");
      out.write("                        console.log(result);\r\n");
      out.write("                        if(result.status==1){\r\n");
      out.write("                            vue.signList=result.data;\r\n");
      out.write("                            var busiStatus='';\r\n");
      out.write("                            if(result.data.length>0){\r\n");
      out.write("                                busiStatus=result.data[0]['busiStatus'];\r\n");
      out.write("                            }\r\n");
      out.write("                            if(!vue.signItem.tagInfo){\r\n");
      out.write("                                vue.signItem.tagInfo={'count':0,tagStatus:''};\r\n");
      out.write("                            }\r\n");
      out.write("                            vue.signItem.tagInfo.tagStatus=TAGSTATUS[busiStatus];\r\n");
      out.write("                            vue.signItem.tagInfo.count=result.data.length;\r\n");
      out.write("                            Vue.set(vue.inquiryList,vue.signItem.index,vue.signItem);\r\n");
      out.write("                        }\r\n");
      out.write("                    }\r\n");
      out.write("                });\r\n");
      out.write("            },\r\n");
      out.write("            getSign:function (item,index) {\r\n");
      out.write("                item.index=index;\r\n");
      out.write("                this.signItem=item;\r\n");
      out.write("                this.signDialogVisible=true;\r\n");
      out.write("                this.signFormShow=false;\r\n");
      out.write("                this.signType='';\r\n");
      out.write("                $('body').css('overflow-y','hidden');\r\n");
      out.write("                var heights=document.body.clientHeight;\r\n");
      out.write("                if(this.signTypeList.length==0){\r\n");
      out.write("                    this.getSignTypeList();\r\n");
      out.write("                }\r\n");
      out.write("                this.getSignList();\r\n");
      out.write("                setTimeout(function () {\r\n");
      out.write("                    $('.signTimeLine').css('max-height',heights-353+'px');\r\n");
      out.write("                },300)\r\n");
      out.write("            },\r\n");
      out.write("            closeSignDialog:function () {\r\n");
      out.write("                this.signDialogVisible=false;\r\n");
      out.write("                setTimeout(function () {\r\n");
      out.write("                    $('body').css('overflow-y','auto');\r\n");
      out.write("                },500);\r\n");
      out.write("            },\r\n");
      out.write("            getSignTypeList:function () {\r\n");
      out.write("                var _this=this;\r\n");
      out.write("                ajax({\r\n");
      out.write("                    url:'/codeType/listCodeValue',\r\n");
      out.write("                    data:{\r\n");
      out.write("                        typeCode:'TAG_TYPE'\r\n");
      out.write("                    },\r\n");
      out.write("                    success:function (result) {\r\n");
      out.write("                        console.log(result);\r\n");
      out.write("                        if(result.status==1){\r\n");
      out.write("                            _this.signTypeList=result.data;\r\n");
      out.write("                        }\r\n");
      out.write("                    }\r\n");
      out.write("                })\r\n");
      out.write("            }\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("    })\r\n");
      out.write("</script>\r\n");
      out.write('\r');
      out.write('\n');
      org.apache.jasper.runtime.JspRuntimeLibrary.include(request, response, "/common/webCommon/bottom.jsp", out, true);
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("    $(document).ready(function () {\r\n");
      out.write("        var rs = window.globalInit();\r\n");
      out.write("        rs.done(function () {\r\n");
      out.write("            $('.form_datetime').datetimepicker({\r\n");
      out.write("                format : 'yyyy-mm-dd',\r\n");
      out.write("                language:  'zh-CN',\r\n");
      out.write("                weekStart: 1,\r\n");
      out.write("                todayBtn: \"linked\",\r\n");
      out.write("                todayHighlight:true,\r\n");
      out.write("                autoclose: true,\r\n");
      out.write("                clearBtn:true,\r\n");
      out.write("                startView: 2,\r\n");
      out.write("                minView: 2,\r\n");
      out.write("                forceParse: true,\r\n");
      out.write("                pickerPosition: \"bottom-left\",\r\n");
      out.write("            }).on('changeDate', function (ev) {\r\n");
      out.write("                reInitDatePicker ($(this));\r\n");
      out.write("                vue.dateType='';\r\n");
      out.write("                vue.search();\r\n");
      out.write("            });\r\n");
      out.write("        });\r\n");
      out.write("        function reInitDatePicker($that) {\r\n");
      out.write("            var id = $that.attr(\"id\");\r\n");
      out.write("            var temp = $that.find('input').val();\r\n");
      out.write("            if (id == \"startDate\" ) {\r\n");
      out.write("                $('#endDate').datetimepicker('setStartDate',temp);\r\n");
      out.write("            } else if (id == \"endDate\" ) {\r\n");
      out.write("                $('#startDate').datetimepicker('setEndDate',temp);\r\n");
      out.write("            }\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("    });\r\n");
      out.write("</script>\r\n");
      out.write("</body>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try { out.clearBuffer(); } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
